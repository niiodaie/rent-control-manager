var e,t=Object.defineProperty,s=(e,s,r)=>((e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r)(e,"symbol"!=typeof s?s+"":s,r);import{j as r,S as a,T as n,I as i,a as o,b as l,P as c,C as d,V as u,L as h,c as m,d as p,e as x,f as g,R as f,g as y,h as b,O as v,i as j,k as w,l as N,m as k,D as _,n as S,o as C}from"./ui-t2RGLx7Z.js";import{b as P,g as T,d as E,r as A,a as R}from"./vendor-C6U66B37.js";import{N as L,u as I,L as O,a as q,b as M,B as $,R as D,c as U}from"./router-BAWWZbMU.js";import{c as B,t as F,a as z}from"./utils-BH0XiVQx.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var W=P;e=W.createRoot,W.hydrateRoot;const G={},H=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in G)return;G[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class K extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class V extends K{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class J extends K{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Y extends K{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Q,Z;(Z=Q||(Q={})).Any="any",Z.ApNortheast1="ap-northeast-1",Z.ApNortheast2="ap-northeast-2",Z.ApSouth1="ap-south-1",Z.ApSoutheast1="ap-southeast-1",Z.ApSoutheast2="ap-southeast-2",Z.CaCentral1="ca-central-1",Z.EuCentral1="eu-central-1",Z.EuWest1="eu-west-1",Z.EuWest2="eu-west-2",Z.EuWest3="eu-west-3",Z.SaEast1="sa-east-1",Z.UsEast1="us-east-1",Z.UsWest1="us-west-1",Z.UsWest2="us-west-2";var X=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class ee{constructor(e,{headers:t={},customFetch:s,region:r=Q.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>H(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return X(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:n}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(i["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(i["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new V(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new J(d);if(!d.ok)throw new Y(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Y||r instanceof J?r.context:void 0}}})}}var te={},se={},re={},ae={},ne={},ie={},oe=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const le=oe.fetch,ce=oe.fetch.bind(oe),de=oe.Headers,ue=oe.Request,he=oe.Response,me=Object.freeze(Object.defineProperty({__proto__:null,Headers:de,Request:ue,Response:he,default:ce,fetch:le},Symbol.toStringTag,{value:"Module"})),pe=T(me);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});let ge=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xe.default=ge;var fe=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});const ye=fe(pe),be=fe(xe);ie.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=ye.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r;let a=null,n=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(a={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,i=null,o=406,l="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(n=[],a=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(r=null==a?void 0:a.details)||void 0===r?void 0:r.includes("0 rows"))&&(a=null,o=200,l="OK"),a&&this.shouldThrowOnError)throw new be.default(a)}return{error:a,data:n,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var ve=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ne,"__esModule",{value:!0});const je=ve(ie);let we=class extends je.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const a=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:a=!1,format:n="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ne.default=we;var Ne=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});const ke=Ne(ne);let _e=class extends ke.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ae.default=_e;var Se=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0});const Ce=Se(ae);re.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let a=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",n),s&&(this.headers.Prefer=`count=${s}`),new Ce.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:a=!0}={}){const n=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),a||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Ce.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Ce.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Pe={},Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.version=void 0,Te.version="0.0.0-automated",Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.DEFAULT_HEADERS=void 0;const Ee=Te;Pe.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ee.version}`};var Ae=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(se,"__esModule",{value:!0});const Re=Ae(re),Le=Ae(ae),Ie=Pe;se.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ie.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Re.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:a}={}){let n;const i=new URL(`${this.url}/rpc/${e}`);let o;s||r?(n=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(n="POST",o=t);const l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new Le.default({method:n,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Oe=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0}),te.PostgrestError=te.PostgrestBuilder=te.PostgrestTransformBuilder=te.PostgrestFilterBuilder=te.PostgrestQueryBuilder=te.PostgrestClient=void 0;const qe=Oe(se);te.PostgrestClient=qe.default;const Me=Oe(re);te.PostgrestQueryBuilder=Me.default;const $e=Oe(ae);te.PostgrestFilterBuilder=$e.default;const De=Oe(ne);te.PostgrestTransformBuilder=De.default;const Ue=Oe(ie);te.PostgrestBuilder=Ue.default;const Be=Oe(xe);te.PostgrestError=Be.default;var Fe=te.default={PostgrestClient:qe.default,PostgrestQueryBuilder:Me.default,PostgrestFilterBuilder:$e.default,PostgrestTransformBuilder:De.default,PostgrestBuilder:Ue.default,PostgrestError:Be.default};const{PostgrestClient:ze,PostgrestQueryBuilder:We,PostgrestFilterBuilder:Ge,PostgrestTransformBuilder:He,PostgrestBuilder:Ke,PostgrestError:Ve}=Fe;const Je=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Ye,Qe,Ze,Xe,et,tt,st,rt,at,nt,it;(Qe=Ye||(Ye={}))[Qe.connecting=0]="connecting",Qe[Qe.open=1]="open",Qe[Qe.closing=2]="closing",Qe[Qe.closed=3]="closed",(Xe=Ze||(Ze={})).closed="closed",Xe.errored="errored",Xe.joined="joined",Xe.joining="joining",Xe.leaving="leaving",(tt=et||(et={})).close="phx_close",tt.error="phx_error",tt.join="phx_join",tt.reply="phx_reply",tt.leave="phx_leave",tt.access_token="access_token",(st||(st={})).websocket="websocket",(at=rt||(rt={})).Connecting="connecting",at.Open="open",at.Closing="closing",at.Closed="closed";class ot{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let n=this.HEADER_LENGTH+2;const i=s.decode(e.slice(n,n+r));n+=r;const o=s.decode(e.slice(n,n+a));n+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class lt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(it=nt||(nt={})).abstime="abstime",it.bool="bool",it.date="date",it.daterange="daterange",it.float4="float4",it.float8="float8",it.int2="int2",it.int4="int4",it.int4range="int4range",it.int8="int8",it.int8range="int8range",it.json="json",it.jsonb="jsonb",it.money="money",it.numeric="numeric",it.oid="oid",it.reltime="reltime",it.text="text",it.time="time",it.timestamp="timestamp",it.timestamptz="timestamptz",it.timetz="timetz",it.tsrange="tsrange",it.tstzrange="tstzrange";const ct=(e,t,s={})=>{var r;const a=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=dt(r,e,t,a),s),{})},dt=(e,t,s,r)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=s[e];return n&&!r.includes(n)?ut(n,i):ht(i)},ut=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return gt(t,s)}switch(e){case nt.bool:return mt(t);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return pt(t);case nt.json:case nt.jsonb:return xt(t);case nt.timestamp:return ft(t);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:default:return ht(t)}},ht=e=>e,mt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pt=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xt=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},gt=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(a){r=n?n.split(","):[]}return r.map(e=>ut(t,e))}return e},ft=e=>"string"==typeof e?e.replace(" ","T"):e,yt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class bt{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var vt,jt,wt,Nt,kt,_t,St,Ct;(jt=vt||(vt={})).SYNC="sync",jt.JOIN="join",jt.LEAVE="leave";class Pt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pt.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=Pt.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Pt.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),n=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const s=a[e];if(s){const r=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let a=e[t];if(!a)return;const n=s.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Nt=wt||(wt={})).ALL="*",Nt.INSERT="INSERT",Nt.UPDATE="UPDATE",Nt.DELETE="DELETE",(_t=kt||(kt={})).BROADCAST="broadcast",_t.PRESENCE="presence",_t.POSTGRES_CHANGES="postgres_changes",_t.SYSTEM="system",(Ct=St||(St={})).SUBSCRIBED="SUBSCRIBED",Ct.TIMED_OUT="TIMED_OUT",Ct.CLOSED="CLOSED",Ct.CHANNEL_ERROR="CHANNEL_ERROR";class Tt{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bt(this,et.join,this.params,this.timeout),this.rejoinTimer=new lt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ze.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(et.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Pt(this),this.broadcastEndpointURL=yt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ze.closed){const{config:{broadcast:a,presence:n,private:i}}=this.params;this._onError(t=>null==e?void 0:e(St.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(St.CLOSED));const o={},l={broadcast:a,presence:n,postgres_changes:null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],private:i};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<a;s++){const a=r[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Ze.errored,void(null==e||e(St.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(St.SUBSCRIBED))}null==e||e(St.SUBSCRIBED)}).receive("error",t=>{this.state=Ze.errored,null==e||e(St.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(St.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:n,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ze.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(et.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new bt(this,et.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new bt(this,e,t,s);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const n=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=et;if(s&&[i,o,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let d=this._onMessage(n,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(d,s)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var s,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:a,errors:n}=e,i={schema:t,table:s,commit_timestamp:r,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===Ze.closed}_isJoined(){return this.state===Ze.joined}_isJoining(){return this.state===Ze.joining}_isLeaving(){return this.state===Ze.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&Tt.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(et.close,{},e)}_onError(e){this._on(et.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ze.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ct(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ct(e.columns,e.old_record)),t}}const Et=()=>{};class At{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Et,this.ref=0,this.logger=Et,this.conn=null,this.sendBuffer=[],this.serializer=new ot,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>H(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${st.websocket}`,this.httpEndpoint=yt(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lt(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Je),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ye.connecting:return rt.Connecting;case Ye.open:return rt.Open;case Ye.closing:return rt.Closing;default:return rt.Closed}}isConnected(){return this.connectionState()===rt.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new Tt(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.11.15"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(et.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:s,payload:r,ref:a}=e;"phoenix"===t&&"phx_reply"===s&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${s} ${a&&"("+a+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,a)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(et.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Rt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Lt(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class It extends Rt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ot extends Rt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qt=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Mt=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>H(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},$t=e=>{if(Array.isArray(e))return e.map(e=>$t(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=$t(s)}),t};var Dt=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ut=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bt=(e,t,s)=>Dt(void 0,void 0,void 0,function*(){const r=yield qt(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield H(()=>Promise.resolve().then(()=>me),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{t(new It(Ut(s),e.status||500))}).catch(e=>{t(new Ot(Ut(e),e))}):t(new Ot(Ut(e),e))});function Ft(e,t,s,r,a,n){return Dt(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),s))})(t,r,a,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Bt(e,o,r))})})}function zt(e,t,s,r){return Dt(this,void 0,void 0,function*(){return Ft(e,"GET",t,s,r)})}function Wt(e,t,s,r,a){return Dt(this,void 0,void 0,function*(){return Ft(e,"POST",t,r,a,s)})}function Gt(e,t,s,r,a){return Dt(this,void 0,void 0,function*(){return Ft(e,"DELETE",t,r,a,s)})}var Ht=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Kt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jt{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Mt(r)}uploadOrUpdate(e,t,s,r){return Ht(this,void 0,void 0,function*(){try{let a;const n=Object.assign(Object.assign({},Vt),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(a=new FormData,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(a=s,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:a,headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(a){if(Lt(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Ht(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Vt.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);const o=yield this.fetch(i.toString(),{method:"PUT",body:e,headers:n}),l=yield o.json();if(o.ok)return{data:{path:a,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(Lt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield Wt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+a.url),i=n.searchParams.get("token");if(!i)throw new Rt("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(Lt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ht(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Ht(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Wt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},{data:a,error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Ht(this,void 0,void 0,function*(){try{const r=yield Wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}download(e,t){return Ht(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield zt(this.fetch,`${this.url}/${s}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}})}info(e){return Ht(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield zt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$t(e),error:null}}catch(s){if(Lt(s))return{data:null,error:s};throw s}})}exists(e){return Ht(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Dt(this,void 0,void 0,function*(){return Ft(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Lt(s)&&s instanceof Ot){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${o}`)}}}remove(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Lt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ht(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Kt),t),{prefix:e||""});return{data:yield Wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Yt={"X-Client-Info":"storage-js/2.7.1"};var Qt=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Zt{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Yt),t),this.fetch=Mt(s)}listBuckets(){return Qt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Lt(e))return{data:null,error:e};throw e}})}getBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Lt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qt(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Lt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Qt(this,void 0,void 0,function*(){try{const s=yield function(e,t,s,r,a){return Dt(this,void 0,void 0,function*(){return Ft(e,"PUT",t,r,a,s)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:s,error:null}}catch(s){if(Lt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Lt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield Gt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Lt(t))return{data:null,error:t};throw t}})}}class Xt extends Zt{constructor(e,t={},s){super(e,t,s)}from(e){return new Jt(this.url,this.headers,e,this.fetch)}}let es="";es="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ts={headers:{"X-Client-Info":`supabase-js-${es}/2.52.0`}},ss={schema:"public"},rs={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},as={};var ns=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const is=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?ce:fetch),(...e)=>t(...e)})(s),a="undefined"==typeof Headers?de:Headers;return(s,n)=>ns(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};var os=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ls="2.71.1",cs=3e4,ds=9e4,us={"X-Client-Info":`gotrue-js/${ls}`},hs="X-Supabase-Api-Version",ms={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ps=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class xs extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function gs(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class fs extends xs{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class ys extends xs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bs extends xs{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class vs extends bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class js extends bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ws extends bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ns extends bs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ks extends bs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _s extends bs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ss(e){return gs(e)&&"AuthRetryableFetchError"===e.name}class Cs extends bs{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ps extends bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ts="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Es=" \t\n\r=".split(""),As=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Es.length;t+=1)e[Es[t].charCodeAt(0)]=-2;for(let t=0;t<Ts.length;t+=1)e[Ts[t].charCodeAt(0)]=t;return e})();function Rs(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Ts[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Ts[e]),t.queuedBits-=6}}function Ls(e,t,s){const r=As[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Is(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)Ls(e.charCodeAt(i),a,n);return t.join("")}function Os(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function qs(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Ls(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Ms(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Os(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function $s(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Rs(e,s,r)),Rs(null,s,r),t.join("")}const Ds=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Us={tested:!1,writable:!1},Bs=()=>{if(!Ds())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Us.tested)return Us.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Us.tested=!0,Us.writable=!0}catch(t){Us.tested=!0,Us.writable=!1}return Us.writable};const Fs=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>H(async()=>{const{default:e}=await Promise.resolve().then(()=>me);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},zs=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Ws=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},Gs=async(e,t)=>{await e.removeItem(t)};class Hs{constructor(){this.promise=new Hs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ks(e){const t=e.split(".");if(3!==t.length)throw new Ps("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!ps.test(t[s]))throw new Ps("JWT not in base64url format");return{header:JSON.parse(Is(t[0])),payload:JSON.parse(Is(t[1])),signature:qs(t[2]),raw:{header:t[0],payload:t[1]}}}function Vs(e){return("0"+e.toString(16)).substr(-2)}async function Js(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ys(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Vs).join("")}();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await zs(e,`${t}-code-verifier`,a);const n=await Js(r);return[n,r===n?"plain":"s256"]}Hs.promiseConstructor=Promise;const Qs=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Zs=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xs(e){if(!Zs.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function er(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tr(e){return JSON.parse(JSON.stringify(e))}const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rr=[502,503,504];async function ar(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new _s(sr(e),0);if(rr.includes(e.status))throw new _s(sr(e),e.status);let r,a;try{r=await e.json()}catch(i){throw new ys(sr(i),i)}const n=function(e){const t=e.headers.get(hs);if(!t)return null;if(!t.match(Qs))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(n&&n.getTime()>=ms.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Cs(sr(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new vs}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Cs(sr(r),e.status,r.weak_password.reasons);throw new fs(sr(r),e.status||500,a)}async function nr(e,t,s,r){var a;const n=Object.assign({},null==r?void 0:r.headers);n[hs]||(n[hs]=ms.name),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,r,a,n){const i=((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))})(t,r,a,n);let o;try{o=await e(s,Object.assign({},i))}catch(l){throw console.error(l),new _s(sr(l),0)}o.ok||await ar(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await ar(l)}}(e,t,s+o,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function ir(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function or(e){const t=ir(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function lr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function cr(e){return{data:e,error:null}}function dr(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function ur(e){return e}const hr=["global","local","others"];class mr{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Fs(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=hr[0]){if(hr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hr.join(", ")}`);try{return await nr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(gs(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await nr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:lr})}catch(s){if(gs(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await nr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:dr,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(gs(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await nr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lr})}catch(t){if(gs(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,a,n,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await nr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:ur});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(gs(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Xs(e);try{return await nr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lr})}catch(t){if(gs(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Xs(e);try{return await nr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:lr})}catch(s){if(gs(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Xs(e);try{return await nr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:lr})}catch(s){if(gs(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Xs(e.userId);try{const{data:t,error:s}=await nr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(gs(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Xs(e.userId),Xs(e.id);try{return{data:await nr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(gs(t))return{data:null,error:t};throw t}}}function pr(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const xr=!!(globalThis&&Bs()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class gr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fr extends gr{}async function yr(e,t,s){xr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw xr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new fr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xr)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}xr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{xr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const br={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:us,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function vr(e,t,s){return await s()}const jr={};class wr{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wr.nextInstanceID,wr.nextInstanceID+=1,this.instanceID>0&&Ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},br),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new mr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Fs(r.fetch),this.lock=r.lock||vr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ds()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=yr:this.lock=vr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Bs()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pr(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=pr(this.memoryStorage)),Ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=jr[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=jr[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ls}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(r){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Ds()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return gs(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return gs(t)?{error:t}:{error:new ys("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const a=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ir}),{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(gs(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,r;try{let a;if("email"in e){const{email:s,password:r,options:n}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ys(this.storage,this.storageKey)),a=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:o},xform:ir})}else{if(!("phone"in e))throw new ws("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=await nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:ir})}}const{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(gs(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:a}=e;t=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:or})}else{if(!("phone"in e))throw new ws("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:a}=e;t=await nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:or})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new js}}catch(t){if(gs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,a,n,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:x,options:g}=e;let f;if(Ds())if("object"==typeof h)f=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");f=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in f&&f.signIn){const e=await f.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),x?{statement:x}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in f&&"function"==typeof f.signMessage&&"publicKey"in f&&"object"==typeof f&&f.publicKey&&"toBase58"in f.publicKey&&"function"==typeof f.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${y.host} wants you to sign in with your Solana account:`,f.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await f.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:$s(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ir});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new js}}catch(x){if(gs(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await Ws(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await nr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ir});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new js}}catch(a){if(gs(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:a,nonce:n}=e,i=await nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ir}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new js}}catch(t){if(gs(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,a,n;try{if("email"in e){const{email:r,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await Ys(this.storage,this.storageKey));const{error:o}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new ws("You must provide either an email or phone number.")}catch(i){if(gs(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:i}=await nr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:ir});if(i)throw i;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(gs(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let a=null,n=null;return"pkce"===this.flowType&&([a,n]=await Ys(this.storage,this.storageKey)),await nr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:n}),headers:this.headers,xform:cr})}catch(a){if(gs(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new vs;const{error:r}=await nr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(gs(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:n}=await nr(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:a}=e,{data:n,error:i}=await nr(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i}}throw new ws("You must provide either an email or phone number and a type")}catch(t){if(gs(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Ws(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<ds;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await Ws(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=er()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lr}):await this._useSession(async e=>{var t,s,r;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:lr}):{data:{user:null},error:new vs}})}catch(t){if(gs(t))return function(e){return gs(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new vs;const n=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Ys(this.storage,this.storageKey));const{data:l,error:c}=await nr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:n.access_token,xform:lr});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(gs(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vs;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:n}=Ks(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:n}=await this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(gs(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new vs;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(gs(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ds())throw new Ns("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ns(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ks("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ns("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ks("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:n,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&n&&l))throw new Ns("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=cs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:x}=await this._getUser(a);if(x)throw x;const g={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(gs(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ws(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{error:a};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return gs(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await Ys(this.storage,this.storageKey,!0));try{return await nr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(gs(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(gs(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,a,n,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await nr(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Ds()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(gs(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)throw n;return await nr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(gs(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await nr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ir})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ss(t)&&Date.now()+s-a<cs},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await s(n);if(!r(n,null,t))return void e(t)}catch(a){if(!r(n,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),gs(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ds()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Ws(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Ws(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await zs(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:er()}else if(a&&!a.user&&!a.user){const e=await Ws(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await Gs(this.storage,this.storageKey+"-user"),await zs(this.storage,this.storageKey,a)):a.user=er()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&await this._removeSession());const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<ds;if(this._debug(s,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Ss(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(s,"error",a),void console.error(a)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Hs;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new vs;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),gs(a)){const e={session:null,error:a};return Ss(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await zs(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=tr(e);await zs(this.storage,this.storageKey,r)}else{const e=tr(t);await zs(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Gs(this.storage,this.storageKey),await Gs(this.storage,this.storageKey+"-code-verifier"),await Gs(this.storage,this.storageKey+"-user"),this.userStorage&&await Gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ds()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cs);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/cs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof gr))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ds()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ys(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await nr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(gs(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)return{data:null,error:n};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await nr(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(gs(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:n,error:i}=await nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:i})})}catch(t){if(gs(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(gs(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=Ks(r.access_token);let i=null;n.aal&&(i=n.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:a,error:n}=await nr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:a,signature:n,raw:{header:i,payload:o}}=Ks(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,n,Ms(`${i}.${o}`))))throw new Ps("Invalid JWT signature");return{data:{claims:a,header:r,signature:n},error:null}}catch(s){if(gs(s))return{data:null,error:s};throw s}}}wr.nextInstanceID=0;const Nr=wr;class kr extends Nr{constructor(e){super(e)}}var _r=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(t){n(t)}}function o(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Sr{constructor(e,t,s){var r,a,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:a,auth:n,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>os(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:ss,realtime:as,auth:Object.assign(Object.assign({},rs),{storageKey:c}),global:ts});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=is(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ze(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new ee(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xt(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return _r(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:n,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new At(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}const Cr=(e,t,s)=>new Sr(e,t,s),Pr=Cr("https://mock.supabase.co","mock_anon_key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),Tr=e=>{var t,s;return(null==(t=null==e?void 0:e.user_metadata)?void 0:t.role)||(null==(s=null==e?void 0:e.app_metadata)?void 0:s.role)||"tenant"},Er=e=>{const t=Tr(e);return"admin"===t||"landlord"===t},Ar=e=>{const t=Tr(e);return"tenant"===t||"resident"===t},Rr=A.createContext({}),Lr=()=>{const e=A.useContext(Rr);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ir=({children:e})=>{const[t,s]=A.useState(null),[a,n]=A.useState(!0),[i,o]=A.useState(null);A.useEffect(()=>{(async()=>{const{data:{session:e}}=await Pr.auth.getSession();s((null==e?void 0:e.user)??null),(null==e?void 0:e.user)&&o(Tr(e.user)),n(!1)})();const{data:{subscription:e}}=Pr.auth.onAuthStateChange(async(e,t)=>{s((null==t?void 0:t.user)??null),(null==t?void 0:t.user)?o(Tr(t.user)):o(null),n(!1)});return()=>e.unsubscribe()},[]);const l=async(e,t)=>{const{data:s,error:r}=await Pr.auth.signInWithPassword({email:e,password:t});return{data:s,error:r}},c=(e,t)=>{if(!e)return"/";switch(e){case"admin":return t&&"free"!==t?"/admin/dashboard":"/choose-plan";case"tenant":return"/resident/dashboard";default:return"/"}},d={user:t,role:i,loading:a,signIn:l,signInWithRedirect:async(e,t)=>{var s;const{data:r,error:a}=await l(e,t);if((null==r?void 0:r.user)&&!a){const e=Tr(r.user),t=null==(s=r.user.user_metadata)?void 0:s.plan;return{data:r,error:a,redirectPath:c(e,t)}}return{data:r,error:a,redirectPath:null}},signUp:async(e,t,s={})=>{const{data:r,error:a}=await Pr.auth.signUp({email:e,password:t,options:{data:s}});return{data:r,error:a}},signOut:async()=>{const{error:e}=await Pr.auth.signOut();return{error:e}},signInWithGoogle:async()=>{const{data:e,error:t}=await Pr.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});return{data:e,error:t}},resetPassword:async e=>{const{data:t,error:s}=await Pr.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return{data:t,error:s}},updateProfile:async e=>{const{data:t,error:s}=await Pr.auth.updateUser({data:e});return{data:t,error:s}},updateUserPlan:async e=>{try{const{data:t,error:r}=await Pr.auth.updateUser({data:{plan:e}});if(r)throw r;return s(t=>({...t,user_metadata:{...null==t?void 0:t.user_metadata,plan:e}})),{data:t,error:null}}catch(t){return{data:null,error:t}}},getRedirectPath:c,isAdmin:!!t&&Er(t),isTenant:!!t&&Ar(t)};return r.jsx(Rr.Provider,{value:d,children:e})},Or=({children:e,requiredRole:t=null,redirectTo:s="/login"})=>{const{user:a,role:n,loading:i}=Lr(),o=I();return i?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):a?t&&n!==t?"admin"===n||"landlord"===n?r.jsx(L,{to:"/admin/dashboard",replace:!0}):r.jsx(L,{to:"/resident/dashboard",replace:!0}):e:r.jsx(L,{to:s,state:{from:o},replace:!0})},qr=({children:e})=>{var t,s;const{user:a,loading:n}=Lr();if(n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});if(a){const e=(null==(t=null==a?void 0:a.user_metadata)?void 0:t.role)||(null==(s=null==a?void 0:a.app_metadata)?void 0:s.role)||"tenant";return"admin"===e||"landlord"===e?r.jsx(L,{to:"/admin/dashboard",replace:!0}):r.jsx(L,{to:"/resident/dashboard",replace:!0})}return e},Mr=(...e)=>e.filter((e,t,s)=>Boolean(e)&&s.indexOf(e)===t).join(" ");
/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var $r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:n,iconNode:i,...o},l)=>A.createElement("svg",{ref:l,...$r,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:Mr("lucide",a),...o},[...i.map(([e,t])=>A.createElement(e,t)),...Array.isArray(n)?n:[n]])),Ur=(e,t)=>{const s=A.forwardRef(({className:s,...r},a)=>{return A.createElement(Dr,{ref:a,iconNode:t,className:Mr(`lucide-${n=e,n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...r});var n});return s.displayName=`${e}`,s},Br=Ur("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Fr=Ur("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),zr=Ur("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Wr=Ur("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Gr=Ur("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Hr=Ur("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Kr=Ur("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vr=Ur("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Jr=Ur("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Yr=Ur("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Qr=Ur("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Zr=Ur("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Xr=Ur("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ea=Ur("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ta=Ur("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),sa=Ur("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ra=Ur("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),aa=Ur("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),na=Ur("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ia=Ur("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),oa=Ur("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),la=Ur("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ca=Ur("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),da=Ur("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ua=Ur("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ha=Ur("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),ma=Ur("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),pa=Ur("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),xa=Ur("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ga=Ur("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),fa=Ur("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ya=Ur("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ba=Ur("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),va=Ur("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ja=Ur("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),wa=Ur("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Na=Ur("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ka=Ur("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_a=Ur("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Sa=Ur("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Ca=Ur("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Pa=Ur("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ta=Ur("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ea=Ur("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Aa=Ur("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Ra=Ur("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),La=Ur("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),Ia=Ur("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Oa=Ur("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qa=Ur("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ma=[{code:"en",name:"English",flag:"🇺🇸"},{code:"es",name:"Español",flag:"🇪🇸"},{code:"fr",name:"Français",flag:"🇫🇷"},{code:"de",name:"Deutsch",flag:"🇩🇪"},{code:"it",name:"Italiano",flag:"🇮🇹"},{code:"pt",name:"Português",flag:"🇵🇹"}],$a=R.createContext({currentLang:"en",setCurrentLang:()=>{}});
/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Da({children:e}){const[t,s]=R.useState("en");R.useEffect(()=>{try{if("undefined"!=typeof window&&window.localStorage){const e=localStorage.getItem("preferred-language");e&&Ma.find(t=>t.code===e)&&s(e)}}catch(e){console.warn("Could not load language preference:",e)}},[]);const a={currentLang:t,setCurrentLang:s};return r.jsx($a.Provider,{value:a,children:e})}function Ua(){const[e,t]=R.useState(!1),{currentLang:s,setCurrentLang:a}=R.useContext($a),n=(()=>{try{return Ma.find(e=>e.code===s)||Ma[0]}catch(e){return Ma[0]}})();return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>t(!e),className:"flex items-center space-x-2 px-3 py-2 text-sm bg-muted/50 hover:bg-muted rounded-md transition-colors",type:"button",children:[r.jsx("span",{className:"text-lg",children:n.flag}),r.jsx("span",{className:"hidden sm:inline",children:n.code.toUpperCase()}),r.jsx(Vr,{className:"h-4 w-4"})]}),e&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-background border rounded-md shadow-lg z-50",children:[r.jsx("div",{className:"p-2 border-b",children:r.jsx("div",{className:"text-xs text-muted-foreground",children:"Select Language"})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:Ma.map(e=>r.jsxs("button",{onClick:()=>(e=>{try{a(e),t(!1),"undefined"!=typeof window&&window.localStorage&&localStorage.setItem("preferred-language",e),window.dispatchEvent(new StorageEvent("storage",{key:"preferred-language",newValue:e}))}catch(s){console.warn("Language change failed, but continuing safely:",s),t(!1)}})(e.code),className:"w-full flex items-center space-x-3 px-3 py-2 text-sm hover:bg-muted transition-colors "+(s===e.code?"bg-muted text-primary":""),type:"button",children:[r.jsx("span",{className:"text-lg",children:e.flag}),r.jsx("span",{className:"flex-1 text-left",children:e.name}),r.jsx("span",{className:"text-xs text-muted-foreground",children:e.code.toUpperCase()})]},e.code))})]})]})}const Ba={en:{"nav.home":"Home","nav.features":"Features","nav.pricing":"Pricing","nav.about":"About","nav.contact":"Contact","nav.faq":"FAQ","nav.signin":"Sign In","nav.getstarted":"Get Started","hero.title":"Global Property Management Made Simple","hero.subtitle":"Streamline your rental business worldwide with our comprehensive platform. Manage properties, tenants, and payments across multiple countries and currencies.","hero.cta.trial":"Start Free Trial","hero.cta.demo":"Watch Demo","hero.trust":"Trusted by 10,000+ Property Managers Globally","hero.benefits.setup":"No setup fees","hero.benefits.cancel":"Cancel anytime","hero.benefits.support":"24/7 global support","features.title":"Everything You Need to Manage Properties Globally","features.subtitle":"Our comprehensive platform provides all the tools you need to efficiently manage rental properties worldwide and create exceptional experiences for your tenants.","features.global.title":"Global Property Management","features.global.desc":"Manage properties across multiple countries with local compliance and currency support.","features.multilang.title":"Multi-Language Tenant Portal","features.multilang.desc":"Tenants can access their portal in their preferred language with automatic translation.","features.payments.title":"Global Payment Processing","features.payments.desc":"Accept payments in 150+ currencies with automatic conversion and local payment methods.","features.lease.title":"Smart Lease Management","features.lease.desc":"Digital contracts with e-signatures, automatic renewals, and local legal compliance.","features.maintenance.title":"Maintenance Workflow","features.maintenance.desc":"Streamlined maintenance requests with vendor management and progress tracking.","features.analytics.title":"Advanced Analytics","features.analytics.desc":"Comprehensive insights with multi-currency reporting and performance metrics.","pricing.title":"Simple, Transparent Global Pricing","pricing.subtitle":"Choose the perfect plan for your property management needs. All plans include a 14-day free trial with no credit card required.","pricing.free.title":"Free","pricing.free.price":"$0/month","pricing.free.desc":"Perfect for getting started with basic property management","pricing.professional.title":"Professional","pricing.professional.price":"$49.99/month","pricing.professional.desc":"Ideal for growing property management businesses","pricing.professional.popular":"Most Popular","pricing.enterprise.title":"Enterprise","pricing.enterprise.price":"Custom","pricing.enterprise.desc":"For large-scale property management companies","pricing.cta.trial":"Start Free Trial","pricing.cta.contact":"Contact Sales","dashboard.title":"Property Dashboard","dashboard.status":"All Systems Active","dashboard.properties":"Properties","dashboard.tenants":"Tenants","dashboard.occupancy":"Occupancy","dashboard.revenue":"Monthly Revenue","dashboard.live":"Live Demo","about.title":"About Us","about.subtitle":"Learn more about our mission to revolutionize global property management.","about.mission.title":"Our Mission","about.mission.description":"We believe property management should be simple, efficient, and accessible to everyone, everywhere.","about.mission.global":"Global reach with local expertise","about.mission.secure":"Bank-level security and compliance","about.mission.simple":"Simple, intuitive user experience","about.stats.title":"Our Impact","about.stats.properties":"Properties Managed","about.stats.countries":"Countries Served","about.stats.users":"Happy Users","about.stats.uptime":"Platform Uptime","about.values.title":"Our Values","about.values.subtitle":"The principles that guide everything we do.","about.values.global.title":"Global Perspective","about.values.global.description":"We think globally while acting locally, understanding diverse markets and regulations.","about.values.security.title":"Security First","about.values.security.description":"Your data and your tenants' information are protected with enterprise-grade security.","about.values.community.title":"Community Focused","about.values.community.description":"We build tools that strengthen the relationship between property managers and tenants.","about.team.title":"Our Team","about.team.description":"A diverse group of professionals passionate about transforming property management.","about.team.commitment.title":"Our Commitment","about.team.commitment.description":"We are committed to continuous innovation and exceptional customer service.","about.contact.title":"Ready to Get Started?","about.contact.description":"Join thousands of property managers who trust us with their business.","about.contact.button":"Contact Us","about.contact.trial":"Start Free Trial","contact.title":"Contact Us","contact.subtitle":"Get in touch with our team. We're here to help you succeed.","contact.info.title":"Get in Touch","contact.info.email.title":"Email Support","contact.info.email.description":"We typically respond within 24 hours","contact.info.phone.title":"Phone Support","contact.info.phone.description":"Monday to Friday, 9 AM to 6 PM CST","contact.info.address.title":"Our Location","contact.info.hours.title":"Business Hours","contact.info.hours.weekdays":"Monday - Friday: 9:00 AM - 6:00 PM CST","contact.info.hours.weekend":"Saturday - Sunday: Closed","contact.support.title":"Quick Support Options","contact.support.help":"Browse Help Center","contact.support.faq":"Frequently Asked Questions","contact.support.email":"Email Support Team","contact.form.title":"Send us a Message","contact.form.name":"Full Name","contact.form.email":"Email Address","contact.form.subject":"Subject","contact.form.subject.placeholder":"Select a topic","contact.form.subject.general":"General Inquiry","contact.form.subject.support":"Technical Support","contact.form.subject.billing":"Billing Question","contact.form.subject.feature":"Feature Request","contact.form.subject.partnership":"Partnership Opportunity","contact.form.message":"Message","contact.form.message.placeholder":"Tell us how we can help you...","contact.form.send":"Send Message","contact.form.sending":"Sending...","contact.form.success.title":"Message Sent!","contact.form.success.message":"Thank you for contacting us. We'll get back to you soon.","faq.title":"Frequently Asked Questions","faq.subtitle":"Find answers to common questions about Rent Control Manager.","faq.search.placeholder":"Search questions...","faq.search.no_results":"No questions found matching your search.","faq.search.clear":"Clear search","faq.contact.title":"Still have questions?","faq.contact.description":"Can't find what you're looking for? Our support team is here to help.","faq.contact.button":"Contact Support","faq.contact.email":"Email Us","blog.title":"Help Center & Guides","blog.subtitle":"Everything you need to know about managing properties and using Rent Control Manager effectively.","blog.search.placeholder":"Search articles...","blog.categories.all":"All","blog.categories.getting_started":"Getting Started","blog.categories.tenant_guide":"Tenant Guide","blog.categories.property_management":"Property Management","blog.categories.pricing":"Pricing","blog.categories.security":"Security","blog.categories.mobile":"Mobile","blog.featured":"Featured Articles","blog.all_articles":"All Articles","blog.read_more":"Read More","blog.quick_access":"Quick Access","blog.help_needed":"Still need help?","blog.help_description":"Can't find what you're looking for? Our support team is here to help.","blog.location_detecting":"Detecting your location...","common.loading":"Loading...","common.error":"Something went wrong","common.tryagain":"Try Again","common.cancel":"Cancel","common.save":"Save","common.close":"Close"},es:{"nav.home":"Inicio","nav.features":"Características","nav.pricing":"Precios","nav.about":"Acerca de","nav.contact":"Contacto","nav.faq":"FAQ","nav.signin":"Iniciar Sesión","nav.getstarted":"Comenzar","hero.title":"Gestión Global de Propiedades Simplificada","hero.subtitle":"Optimiza tu negocio de alquiler a nivel mundial con nuestra plataforma integral. Gestiona propiedades, inquilinos y pagos en múltiples países y monedas.","hero.cta.trial":"Prueba Gratuita","hero.cta.demo":"Ver Demo","hero.trust":"Confiado por más de 10,000 Administradores de Propiedades Globalmente","hero.benefits.setup":"Sin tarifas de configuración","hero.benefits.cancel":"Cancela en cualquier momento","hero.benefits.support":"Soporte global 24/7","features.title":"Todo lo que Necesitas para Gestionar Propiedades Globalmente","features.subtitle":"Nuestra plataforma integral proporciona todas las herramientas que necesitas para gestionar eficientemente propiedades de alquiler en todo el mundo.","features.global.title":"Gestión Global de Propiedades","features.global.desc":"Gestiona propiedades en múltiples países con cumplimiento local y soporte de monedas.","features.multilang.title":"Portal Multiidioma para Inquilinos","features.multilang.desc":"Los inquilinos pueden acceder a su portal en su idioma preferido con traducción automática.","features.payments.title":"Procesamiento Global de Pagos","features.payments.desc":"Acepta pagos en más de 150 monedas con conversión automática y métodos de pago locales.","features.lease.title":"Gestión Inteligente de Contratos","features.lease.desc":"Contratos digitales con firmas electrónicas, renovaciones automáticas y cumplimiento legal local.","features.maintenance.title":"Flujo de Trabajo de Mantenimiento","features.maintenance.desc":"Solicitudes de mantenimiento optimizadas con gestión de proveedores y seguimiento de progreso.","features.analytics.title":"Análisis Avanzados","features.analytics.desc":"Información integral con informes multimoneda y métricas de rendimiento.","pricing.title":"Precios Globales Simples y Transparentes","pricing.subtitle":"Elige el plan perfecto para tus necesidades de gestión de propiedades. Todos los planes incluyen una prueba gratuita de 14 días sin tarjeta de crédito requerida.","pricing.free.title":"Gratuito","pricing.free.price":"$0/mes","pricing.free.desc":"Perfecto para comenzar con gestión básica de propiedades","pricing.professional.title":"Profesional","pricing.professional.price":"$49.99/mes","pricing.professional.desc":"Ideal para empresas de gestión de propiedades en crecimiento","pricing.professional.popular":"Más Popular","pricing.enterprise.title":"Empresarial","pricing.enterprise.price":"Personalizado","pricing.enterprise.desc":"Para empresas de gestión de propiedades a gran escala","pricing.cta.trial":"Comenzar Prueba Gratuita","pricing.cta.contact":"Contactar Ventas","dashboard.title":"Panel de Propiedades","dashboard.status":"Todos los Sistemas Activos","dashboard.properties":"Propiedades","dashboard.tenants":"Inquilinos","dashboard.occupancy":"Ocupación","dashboard.revenue":"Ingresos Mensuales","dashboard.live":"Demo en Vivo","about.title":"Acerca de Nosotros","about.subtitle":"Conoce más sobre nuestra misión de revolucionar la gestión global de propiedades.","about.mission.title":"Nuestra Misión","about.mission.description":"Creemos que la gestión de propiedades debe ser simple, eficiente y accesible para todos, en todas partes.","about.mission.global":"Alcance global con experiencia local","about.mission.secure":"Seguridad y cumplimiento de nivel bancario","about.mission.simple":"Experiencia de usuario simple e intuitiva","about.stats.title":"Nuestro Impacto","about.stats.properties":"Propiedades Gestionadas","about.stats.countries":"Países Atendidos","about.stats.users":"Usuarios Satisfechos","about.stats.uptime":"Tiempo de Actividad de la Plataforma","about.values.title":"Nuestros Valores","about.values.subtitle":"Los principios que guían todo lo que hacemos.","about.values.global.title":"Perspectiva Global","about.values.global.description":"Pensamos globalmente mientras actuamos localmente, entendiendo diversos mercados y regulaciones.","about.values.security.title":"Seguridad Primero","about.values.security.description":"Tus datos y la información de tus inquilinos están protegidos con seguridad de nivel empresarial.","about.values.community.title":"Enfocados en la Comunidad","about.values.community.description":"Construimos herramientas que fortalecen la relación entre administradores de propiedades e inquilinos.","about.team.title":"Nuestro Equipo","about.team.description":"Un grupo diverso de profesionales apasionados por transformar la gestión de propiedades.","about.team.commitment.title":"Nuestro Compromiso","about.team.commitment.description":"Estamos comprometidos con la innovación continua y el servicio al cliente excepcional.","about.contact.title":"¿Listo para Comenzar?","about.contact.description":"Únete a miles de administradores de propiedades que confían en nosotros con su negocio.","about.contact.button":"Contáctanos","about.contact.trial":"Comenzar Prueba Gratuita","contact.title":"Contáctanos","contact.subtitle":"Ponte en contacto con nuestro equipo. Estamos aquí para ayudarte a tener éxito.","contact.info.title":"Ponte en Contacto","contact.info.email.title":"Soporte por Email","contact.info.email.description":"Típicamente respondemos dentro de 24 horas","contact.info.phone.title":"Soporte Telefónico","contact.info.phone.description":"Lunes a Viernes, 9 AM a 6 PM CST","contact.info.address.title":"Nuestra Ubicación","contact.info.hours.title":"Horario de Atención","contact.info.hours.weekdays":"Lunes - Viernes: 9:00 AM - 6:00 PM CST","contact.info.hours.weekend":"Sábado - Domingo: Cerrado","contact.support.title":"Opciones de Soporte Rápido","contact.support.help":"Explorar Centro de Ayuda","contact.support.faq":"Preguntas Frecuentes","contact.support.email":"Equipo de Soporte por Email","contact.form.title":"Envíanos un Mensaje","contact.form.name":"Nombre Completo","contact.form.email":"Dirección de Email","contact.form.subject":"Asunto","contact.form.subject.placeholder":"Selecciona un tema","contact.form.subject.general":"Consulta General","contact.form.subject.support":"Soporte Técnico","contact.form.subject.billing":"Pregunta de Facturación","contact.form.subject.feature":"Solicitud de Función","contact.form.subject.partnership":"Oportunidad de Asociación","contact.form.message":"Mensaje","contact.form.message.placeholder":"Cuéntanos cómo podemos ayudarte...","contact.form.send":"Enviar Mensaje","contact.form.sending":"Enviando...","contact.form.success.title":"¡Mensaje Enviado!","contact.form.success.message":"Gracias por contactarnos. Te responderemos pronto.","faq.title":"Preguntas Frecuentes","faq.subtitle":"Encuentra respuestas a preguntas comunes sobre Rent Control Manager.","faq.search.placeholder":"Buscar preguntas...","faq.search.no_results":"No se encontraron preguntas que coincidan con tu búsqueda.","faq.search.clear":"Limpiar búsqueda","faq.contact.title":"¿Aún tienes preguntas?","faq.contact.description":"¿No encuentras lo que buscas? Nuestro equipo de soporte está aquí para ayudar.","faq.contact.button":"Contactar Soporte","faq.contact.email":"Envíanos un Email","blog.title":"Centro de Ayuda y Guías","blog.subtitle":"Todo lo que necesitas saber sobre gestión de propiedades y uso efectivo de Rent Control Manager.","blog.search.placeholder":"Buscar artículos...","blog.categories.all":"Todos","blog.categories.getting_started":"Comenzando","blog.categories.tenant_guide":"Guía del Inquilino","blog.categories.property_management":"Gestión de Propiedades","blog.categories.pricing":"Precios","blog.categories.security":"Seguridad","blog.categories.mobile":"Móvil","blog.featured":"Artículos Destacados","blog.all_articles":"Todos los Artículos","blog.read_more":"Leer Más","blog.quick_access":"Acceso Rápido","blog.help_needed":"¿Aún necesitas ayuda?","blog.help_description":"¿No encuentras lo que buscas? Nuestro equipo de soporte está aquí para ayudar.","blog.location_detecting":"Detectando tu ubicación...","common.loading":"Cargando...","common.error":"Algo salió mal","common.tryagain":"Intentar de Nuevo","common.cancel":"Cancelar","common.save":"Guardar","common.close":"Cerrar"}};function Fa(){return"undefined"!=typeof window&&localStorage.getItem("preferred-language")||"en"}function za(e,t=null){var s,r;const a=t||Fa();return(null==(s=Ba[a])?void 0:s[e])||(null==(r=Ba.en)?void 0:r[e])||e}function Wa(){const[e,t]=R.useState(!1),[s,a]=R.useState(!1),{user:n,signOut:i}=Lr(),o=I(),[l,c]=R.useState("en");R.useEffect(()=>{const e=()=>{c(Fa())};e();const t=t=>{"preferred-language"===t.key&&e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const d=e=>o.pathname===e,u=e=>{if("/"!==o.pathname)return void(window.location.href=`/#${e}`);const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"}),a(!1)};return r.jsxs("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[r.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[r.jsxs(O,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("img",{src:"/assets/RC-Logo.png",alt:"Rent Control Logo",className:"w-8 h-8"}),r.jsx("span",{className:"font-bold text-xl",children:"Rent Control"})]}),r.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[r.jsx(O,{to:"/",className:"text-sm font-medium transition-colors hover:text-primary "+(d("/")?"text-primary":"text-muted-foreground"),children:za("nav.home",l)}),r.jsx("button",{onClick:()=>u("features"),className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:za("nav.features",l)}),r.jsx("button",{onClick:()=>u("pricing"),className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:za("nav.pricing",l)}),r.jsx(O,{to:"/about",className:"text-sm font-medium transition-colors hover:text-primary "+(d("/about")?"text-primary":"text-muted-foreground"),children:za("nav.about",l)}),r.jsx(O,{to:"/contact",className:"text-sm font-medium transition-colors hover:text-primary "+(d("/contact")?"text-primary":"text-muted-foreground"),children:za("nav.contact",l)}),r.jsx(O,{to:"/faq",className:"text-sm font-medium transition-colors hover:text-primary "+(d("/faq")?"text-primary":"text-muted-foreground"),children:za("nav.faq",l)})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Ua,{}),r.jsx("button",{onClick:()=>{t(!e),document.documentElement.classList.toggle("dark")},className:"p-2 rounded-md hover:bg-muted transition-colors","aria-label":"Toggle theme",children:e?r.jsx(Ca,{className:"h-4 w-4"}):r.jsx(ya,{className:"h-4 w-4"})}),n?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:n.email}),r.jsx("button",{onClick:async()=>{try{await i()}catch(e){console.error("Sign out error:",e)}},className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:"Sign Out"})]}):r.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[r.jsx(O,{to:"/login",className:"text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:za("nav.signin",l)}),r.jsx(O,{to:"/register",className:"bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:za("nav.getstarted",l)})]}),r.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 rounded-md hover:bg-muted transition-colors","aria-label":"Toggle mobile menu",children:s?r.jsx(Oa,{className:"h-4 w-4"}):r.jsx(fa,{className:"h-4 w-4"})})]})]}),s&&r.jsx("div",{className:"md:hidden border-t bg-background",children:r.jsxs("div",{className:"container py-4 space-y-4",children:[r.jsx(O,{to:"/",className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>a(!1),children:za("nav.home",l)}),r.jsx("button",{onClick:()=>u("features"),className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors text-left",children:za("nav.features",l)}),r.jsx("button",{onClick:()=>u("pricing"),className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors text-left",children:za("nav.pricing",l)}),r.jsx(O,{to:"/about",className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>a(!1),children:za("nav.about",l)}),r.jsx(O,{to:"/contact",className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>a(!1),children:za("nav.contact",l)}),r.jsx(O,{to:"/faq",className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>a(!1),children:za("nav.faq",l)}),!n&&r.jsxs("div",{className:"pt-4 border-t space-y-2",children:[r.jsx(O,{to:"/login",className:"block text-sm font-medium text-muted-foreground hover:text-primary transition-colors",onClick:()=>a(!1),children:za("nav.signin",l)}),r.jsx(O,{to:"/signup",className:"block bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md text-sm font-medium transition-colors text-center",onClick:()=>a(!1),children:za("nav.getstarted",l)})]})]})})]})}const Ga=()=>{const{currentLang:e}=A.useContext($a);return r.jsx("footer",{className:"bg-gray-900 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("img",{src:"/RC-Logo.png",alt:"Rent Control Logo",className:"w-8 h-8"}),r.jsx("span",{className:"font-bold text-xl",children:"Rent Control"})]}),r.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:za("hero.subtitle",e)}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("a",{href:"mailto:info@rent-control.net",className:"text-gray-300 hover:text-white transition-colors",children:"info@rent-control.net"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.jsx("a",{href:"tel:+19208081188",className:"text-gray-300 hover:text-white transition-colors",children:"+1 (920) 808-1188"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("span",{className:"text-gray-300",children:"Appleton, WI — Global Headquarters"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-blue-900/30 rounded-lg border border-blue-800",children:r.jsxs("p",{className:"text-blue-200 text-sm",children:["Have feedback? Email"," ",r.jsx("a",{href:"mailto:info@rent-control.net",className:"text-blue-400 hover:text-blue-300 transition-colors font-medium",children:"info@rent-control.net"})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Quick Links"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(O,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:za("nav.home",e)})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>{const e=document.getElementById("features");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-300 hover:text-white transition-colors",children:za("nav.features",e)})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>{const e=document.getElementById("pricing");e&&e.scrollIntoView({behavior:"smooth"})},className:"text-gray-300 hover:text-white transition-colors",children:za("nav.pricing",e)})}),r.jsx("li",{children:r.jsx(O,{to:"/about",className:"text-gray-300 hover:text-white transition-colors",children:za("nav.about",e)})}),r.jsx("li",{children:r.jsx(O,{to:"/contact",className:"text-gray-300 hover:text-white transition-colors",children:za("nav.contact",e)})}),r.jsx("li",{children:r.jsx(O,{to:"/faq",className:"text-gray-300 hover:text-white transition-colors",children:za("nav.faq",e)})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Support"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(O,{to:"/help",className:"text-gray-300 hover:text-white transition-colors",children:"Help Center"})}),r.jsx("li",{children:r.jsx(O,{to:"/docs",className:"text-gray-300 hover:text-white transition-colors",children:"Documentation"})}),r.jsx("li",{children:r.jsx(O,{to:"/api",className:"text-gray-300 hover:text-white transition-colors",children:"API Reference"})}),r.jsx("li",{children:r.jsx(O,{to:"/status",className:"text-gray-300 hover:text-white transition-colors",children:"System Status"})}),r.jsx("li",{children:r.jsx(O,{to:"/security",className:"text-gray-300 hover:text-white transition-colors",children:"Security"})}),r.jsx("li",{children:r.jsx(O,{to:"/privacy",className:"text-gray-300 hover:text-white transition-colors",children:"Privacy Policy"})})]})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800",children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[r.jsxs("div",{className:"flex space-x-6 mb-4 md:mb-0",children:[r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.987C24.007 5.367 18.641.001 12.017.001z"})})})]}),r.jsxs("div",{className:"text-center md:text-right",children:[r.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"© 2024 Rent Control Manager. All rights reserved."}),r.jsxs("p",{className:"text-gray-500 text-xs",children:["Powered by"," ",r.jsx("a",{href:"https://visnec.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Visnec"})]})]})]})})]})})},Ha=B("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ka({className:e,variant:t,...s}){return r.jsx("div",{className:Ha({variant:t}),...s})}const Va=[{code:"en",name:"English",flag:"🇺🇸",countries:["US","CA","GB","AU","NZ","IE"]},{code:"es",name:"Español",flag:"🇪🇸",countries:["ES","MX","AR","CO","PE","VE","CL","EC","GT","CU"]},{code:"fr",name:"Français",flag:"🇫🇷",countries:["FR","BE","CH","CA","LU","MC"]},{code:"de",name:"Deutsch",flag:"🇩🇪",countries:["DE","AT","CH","LI"]},{code:"it",name:"Italiano",flag:"🇮🇹",countries:["IT","CH","SM","VA"]},{code:"pt",name:"Português",flag:"🇵🇹",countries:["PT","BR","AO","MZ"]},{code:"zh",name:"中文",flag:"🇨🇳",countries:["CN","TW","HK","SG"]},{code:"ja",name:"日本語",flag:"🇯🇵",countries:["JP"]},{code:"ko",name:"한국어",flag:"🇰🇷",countries:["KR"]},{code:"ar",name:"العربية",flag:"🇸🇦",countries:["SA","AE","EG","JO","LB","SY","IQ","KW","QA","BH","OM","YE"]},{code:"ru",name:"Русский",flag:"🇷🇺",countries:["RU","BY","KZ","KG","TJ"]},{code:"hi",name:"हिन्दी",flag:"🇮🇳",countries:["IN"]},{code:"nl",name:"Nederlands",flag:"🇳🇱",countries:["NL","BE","SR"]},{code:"sv",name:"Svenska",flag:"🇸🇪",countries:["SE","FI"]},{code:"no",name:"Norsk",flag:"🇳🇴",countries:["NO"]},{code:"da",name:"Dansk",flag:"🇩🇰",countries:["DK"]},{code:"fi",name:"Suomi",flag:"🇫🇮",countries:["FI"]},{code:"pl",name:"Polski",flag:"🇵🇱",countries:["PL"]},{code:"tr",name:"Türkçe",flag:"🇹🇷",countries:["TR"]},{code:"th",name:"ไทย",flag:"🇹🇭",countries:["TH"]}];function Ja(){const{location:e,loading:t,error:s}=function(){const[e,t]=A.useState(null),[s,r]=A.useState(!0),[a,n]=A.useState(null);A.useEffect(()=>{i()},[]);const i=async()=>{try{r(!0),n(null);const s=["https://ipapi.co/json/","https://ip-api.com/json/","https://ipinfo.io/json"];let a=null;for(const t of s)try{const e=await fetch(t),s=await e.json();if(t.includes("ipapi.co"))a={country:s.country_name,countryCode:s.country_code,city:s.city,region:s.region,timezone:s.timezone,currency:s.currency,latitude:s.latitude,longitude:s.longitude,ip:s.ip};else if(t.includes("ip-api.com"))a={country:s.country,countryCode:s.countryCode,city:s.city,region:s.regionName,timezone:s.timezone,currency:s.currency,latitude:s.lat,longitude:s.lon,ip:s.query};else if(t.includes("ipinfo.io")){const[e,t]=(s.loc||"0,0").split(",");a={country:s.country,countryCode:s.country,city:s.city,region:s.region,timezone:s.timezone,latitude:parseFloat(e),longitude:parseFloat(t),ip:s.ip}}if(a&&a.country)break}catch(e){console.log(`Failed to get location from ${t}:`,e);continue}if(!a)throw new Error("All geolocation services failed");t(a)}catch(s){console.error("Geolocation detection failed:",s),n(s.message);try{const e=navigator.language||navigator.languages[0],s=e.split("-")[0],r=e.split("-")[1];t({country:"Unknown",countryCode:r||"US",city:"Unknown",region:"Unknown",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:s,ip:"Unknown"})}catch(a){console.error("Fallback detection failed:",a)}}finally{r(!1)}};return{location:e,loading:s,error:a,refreshLocation:()=>{i()}}}(),{currentLanguage:a,isAutoDetected:n}=function(e=null){const[t,s]=A.useState("en"),[r,a]=A.useState(null),[n,i]=A.useState(!1);A.useEffect(()=>{o()},[e]);const o=()=>{try{let t="en",r="default";if(e&&e.countryCode){const s=e.countryCode.toUpperCase(),a=Va.find(e=>e.countries.includes(s));a&&(t=a.code,r="location")}if("default"===r){const e=(navigator.language||navigator.languages[0]).split("-")[0].toLowerCase();Va.find(t=>t.code===e)&&(t=e,r="browser")}const n=localStorage.getItem("preferred-language");n&&Va.find(e=>e.code===n)&&(t=n,r="saved"),a({code:t,method:r,timestamp:(new Date).toISOString()}),localStorage.getItem("language-manually-changed")||(s(t),i("saved"!==r))}catch(t){console.error("Language detection failed:",t),a({code:"en",method:"error",error:t.message})}};return{selectedLanguage:t,detectedLanguage:r,isAutoDetected:n,currentLanguage:Va.find(e=>e.code===t)||Va[0],availableLanguages:Va,changeLanguage:e=>{Va.find(t=>t.code===e)&&(s(e),localStorage.setItem("preferred-language",e),localStorage.setItem("language-manually-changed","true"),i(!1),console.log("Language changed to:",e),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}})))},resetToAutoDetect:()=>{localStorage.removeItem("language-manually-changed"),localStorage.removeItem("preferred-language"),o()},getLanguageByCountry:e=>Va.find(t=>t.countries.includes(e.toUpperCase())),detectLanguage:o}}(e);return t?r.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.jsxs(Ka,{variant:"secondary",className:"flex items-center space-x-2 p-3",children:[r.jsx(ca,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Detecting your location..."})]})}):s?r.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.jsxs(Ka,{variant:"destructive",className:"flex items-center space-x-2 p-3",children:[r.jsx(Ra,{className:"h-4 w-4"}),r.jsx("span",{children:"Location detection failed"})]})}):e&&n?r.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.jsxs(Ka,{variant:"secondary",className:"flex items-center space-x-2 p-3 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ga,{className:"h-4 w-4"}),r.jsxs("span",{children:[e.city,", ",e.country]})]}),r.jsx("div",{className:"w-px h-4 bg-green-300"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ha,{className:"h-4 w-4"}),r.jsxs("span",{children:[null==a?void 0:a.flag," ",null==a?void 0:a.name]})]}),r.jsx(La,{className:"h-4 w-4 text-green-600"})]})}):null}class Ya extends R.Component{constructor(e){super(e),s(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),s(this,"handleReload",()=>{window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"max-w-md w-full mx-4 p-6 bg-card border rounded-lg shadow-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(Pa,{className:"h-8 w-8 text-destructive"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"An unexpected error occurred"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:this.handleRetry,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[r.jsx(ja,{className:"h-4 w-4"}),r.jsx("span",{children:"Try Again"})]}),r.jsx("button",{onClick:this.handleReload,className:"w-full px-4 py-2 bg-muted text-muted-foreground rounded-md hover:bg-muted/80 transition-colors",children:"Reload Page"})]}),!1]})}):this.props.children}}const Qa=()=>{const{currentLang:e}=A.useContext($a),[t,s]=A.useState(!1),a=()=>{window.location.href="/register"};return r.jsxs("section",{className:"relative bg-gradient-to-br from-blue-50 via-white to-purple-50 pt-20 pb-16 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full opacity-10 blur-3xl transform translate-x-1/2 -translate-y-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-green-400 to-blue-500 rounded-full opacity-10 blur-3xl transform -translate-x-1/2 translate-y-1/2"}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"text-center mb-8",children:r.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:za("hero.trust",e)})]})}),r.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-gray-900 mb-6 leading-tight",children:r.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent",children:za("hero.title",e)})}),r.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:za("hero.subtitle",e)}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[r.jsxs("button",{onClick:a,className:"group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 min-w-[200px]",children:[r.jsxs("span",{className:"relative z-10",children:[za("hero.cta.trial",e)," →"]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-700 to-purple-700 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]}),r.jsx("button",{onClick:()=>{s(!0)},className:"group px-8 py-4 bg-white/80 backdrop-blur-sm text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:bg-white transition-all duration-200 min-w-[200px]",children:r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),za("hero.cta.demo",e)]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),za("hero.benefits.setup",e)]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),za("hero.benefits.cancel",e)]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),za("hero.benefits.support",e)]})]})]}),r.jsx("div",{className:"mt-16 max-w-6xl mx-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl blur-2xl opacity-20 transform scale-105"}),r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:za("dashboard.title",e)}),r.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),za("dashboard.status",e)]})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"247"}),r.jsx("div",{className:"text-gray-600",children:za("dashboard.properties",e)})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"1,856"}),r.jsx("div",{className:"text-gray-600",children:za("dashboard.tenants",e)})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"98%"}),r.jsx("div",{className:"text-gray-600",children:za("dashboard.occupancy",e)})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-full text-sm font-medium",children:[r.jsx("span",{className:"mr-2",children:"✨"}),za("dashboard.live",e)]})})]})]})]})})]}),t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:za("hero.cta.demo",e)}),r.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"aspect-video bg-gray-100 rounded-xl flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),r.jsx("p",{className:"text-gray-600",children:"Demo video would be embedded here"}),r.jsx("button",{onClick:a,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:za("hero.cta.trial",e)})]})})})]})})]})},Za=()=>{const{currentLang:e}=A.useContext($a),t=[{icon:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),titleKey:"features.global.title",descKey:"features.global.desc",color:"from-blue-500 to-cyan-500"},{icon:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),titleKey:"features.multilang.title",descKey:"features.multilang.desc",color:"from-purple-500 to-pink-500"},{icon:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),titleKey:"features.payments.title",descKey:"features.payments.desc",color:"from-green-500 to-emerald-500"},{icon:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),titleKey:"features.lease.title",descKey:"features.lease.desc",color:"from-orange-500 to-red-500"},{icon:r.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),titleKey:"features.maintenance.title",descKey:"features.maintenance.desc",color:"from-indigo-500 to-purple-500"},{icon:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),titleKey:"features.analytics.title",descKey:"features.analytics.desc",color:"from-teal-500 to-blue-500"}];return r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[r.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-600 rounded-full text-sm font-medium mb-6",children:[r.jsx("span",{className:"mr-2",children:"✨"}),za("features.title",e).split(" ").slice(0,2).join(" ")]}),r.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:za("features.title",e)}),r.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:za("features.subtitle",e)})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((t,s)=>r.jsxs("div",{className:"group relative bg-white rounded-2xl p-8 border border-gray-100 hover:border-gray-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-white rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${t.color} text-white rounded-xl mb-6 group-hover:scale-110 transition-transform duration-300`,children:t.icon}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors duration-300",children:za(t.titleKey,e)}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:za(t.descKey,e)}),r.jsx("div",{className:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:r.jsxs("div",{className:"inline-flex items-center text-blue-600 font-medium",children:[r.jsx("span",{className:"mr-2",children:"Learn more"}),r.jsx("svg",{className:"w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]},s))}),r.jsxs("div",{className:"mt-20 bg-gradient-to-br from-blue-50 to-purple-50 rounded-3xl p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Ready to Transform Your Global Property Management?"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Join thousands of property managers who have streamlined their operations and increased their revenue with our platform."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{icon:"🔒",title:"Enterprise Security",desc:"Bank-level security with GDPR compliance and data encryption worldwide."},{icon:"📱",title:"Mobile-First Design",desc:"Full-featured mobile apps for iOS and Android with offline capabilities."},{icon:"🌍",title:"Location Intelligence",desc:"Auto-detect user location and adapt interface to local regulations and customs."},{icon:"🔗",title:"API Integration",desc:"Connect with 500+ third-party services and build custom integrations."}].map((e,t)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl mb-3",children:e.icon}),r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.desc})]},t))}),r.jsxs("div",{className:"text-center mt-12",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:()=>window.location.href="/signup",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:za("hero.cta.trial",e)}),r.jsx("button",{onClick:()=>window.location.href="/contact",className:"px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 transition-all duration-200",children:"Schedule Demo"})]}),r.jsx("div",{className:"mt-6 text-sm text-gray-600",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[r.jsx("span",{children:"14-day free trial"}),r.jsx("span",{className:"hidden sm:block",children:"•"}),r.jsx("span",{children:"No credit card required"}),r.jsx("span",{className:"hidden sm:block",children:"•"}),r.jsx("span",{children:"Cancel anytime"})]})})]})]})]})})};function Xa(){const[e,t]=R.useState("en");R.useEffect(()=>{const e=()=>{t(Fa())};e();const s=t=>{"preferred-language"===t.key&&e()};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]);return r.jsx("section",{id:"pricing",className:"py-24 bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Simple, Transparent Global Pricing"}),r.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:"Choose the perfect plan for your property management needs. All plans include a 14-day free trial with no credit card required."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto",children:[{name:"Free",price:"$0",period:"/month",description:"Perfect for getting started with basic property management",features:["Up to 1 property unit","Basic tenant management","Payment tracking","Email support","Mobile app access","Includes ads"],popular:!1,cta:"Start Free",highlight:"With ads, 1 unit max"},{name:"Starter",price:"$49.99",period:"/month",description:"Ideal for small property managers",features:["Up to 5 property units","Advanced tenant portal","Automated rent collection","Maintenance management","Financial reporting","Priority support","No ads"],popular:!0,cta:"Start Free Trial",highlight:"Most Popular"},{name:"Professional",price:"$129.99",period:"/month",description:"Perfect for growing property management businesses",features:["Up to 15 property units","Advanced analytics","Multi-language support","Custom branding","API access","Dedicated support","Advanced integrations"],popular:!1,cta:"Start Free Trial",highlight:"Best Value"},{name:"Enterprise",price:"Custom",period:"",description:"For large-scale property management companies",features:["Unlimited property units","White-label solution","Custom integrations","Dedicated account manager","Advanced analytics","24/7 phone support","Custom training"],popular:!1,cta:"Contact Sales",highlight:"Unlimited Scale"}].map((e,t)=>r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 "+(e.popular?"ring-2 ring-blue-500 scale-105":"hover:shadow-xl transition-shadow"),children:[e.popular&&r.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center",children:[r.jsx(Sa,{className:"w-4 h-4 mr-1"}),e.highlight]})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e.name}),r.jsxs("div",{className:"mb-4",children:[r.jsx("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:e.price}),e.period&&r.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e.period})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:e.description})]}),r.jsx("ul",{className:"space-y-3 mb-8",children:e.features.map((e,t)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx(Kr,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300 text-sm",children:e})]},t))}),r.jsxs(O,{to:"Contact Sales"===e.cta?"/contact":"/signup",className:"w-full inline-flex items-center justify-center px-6 py-3 rounded-lg font-medium transition-colors "+(e.popular?"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700":"bg-gray-900 dark:bg-white text-white dark:text-gray-900 hover:bg-gray-800 dark:hover:bg-gray-100"),children:[e.cta,r.jsx(Fr,{className:"w-4 h-4 ml-2"})]})]},t))}),r.jsx("div",{className:"text-center mt-12",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"All plans include a 14-day free trial. No credit card required."})})]})})}function en(){return r.jsxs("div",{children:[r.jsx("section",{id:"home",children:r.jsx(Qa,{})}),r.jsx("section",{id:"features",children:r.jsx(Za,{})}),r.jsx("section",{id:"pricing",children:r.jsx(Xa,{})}),r.jsx(Ga,{})]})}const tn=Cr("https://mock.supabase.co","mock_anon_key",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),sn=async()=>{try{const{data:{user:e},error:t}=await tn.auth.getUser();if(t)throw t;return e}catch(e){return console.error("Error getting current user:",e),null}},rn=async e=>{try{const{data:t,error:s}=await tn.from("profiles").select("*").eq("id",e).single();if(s)throw s;return t}catch(t){return console.error("Error getting user profile:",t),null}};function an(...e){return F(z(e))}const nn=B("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function on({className:e,variant:t,size:s,asChild:n=!1,...i}){const o=n?a:"button";return r.jsx(o,{"data-slot":"button",className:an(nn({variant:t,size:s,className:e})),...i})}function ln({className:e,type:t,...s}){return r.jsx("input",{type:t,"data-slot":"input",className:an("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}const cn=B("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),dn=A.forwardRef(({className:e,variant:t,...s},a)=>r.jsx("div",{ref:a,role:"alert",className:an(cn({variant:t}),e),...s}));dn.displayName="Alert";A.forwardRef(({className:e,...t},s)=>r.jsx("h5",{ref:s,className:an("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const un=A.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:an("text-sm [&_p]:leading-relaxed",e),...t}));un.displayName="AlertDescription";const hn="/assets/RC-Logo-CoEiaWuM.png";function mn(){var e,t;const[s,a]=A.useState(!1),[n,i]=A.useState(!1),[o,l]=A.useState(""),[c,d]=A.useState({email:"",password:""}),{signIn:u,signInWithGoogle:h,signInWithRedirect:m}=Lr(),p=q(),x=(null==(t=null==(e=I().state)?void 0:e.from)?void 0:t.pathname)||"/",g=e=>{d({...c,[e.target.name]:e.target.value})};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"w-full max-w-md space-y-8 px-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:hn,alt:"Rent Control Logo",className:"h-16 w-16 object-contain"})}),r.jsx("h2",{className:"text-3xl font-bold",children:"Welcome back"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Sign in to your Rent Control account"})]}),o&&r.jsxs(dn,{variant:"destructive",children:[r.jsx(Yr,{className:"h-4 w-4"}),r.jsx(un,{children:o})]}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),l("");try{const{data:e,error:t,redirectPath:s}=await m(c.email,c.password);t?l(t.message):(null==e?void 0:e.user)&&p(s||x)}catch(t){l("An unexpected error occurred. Please try again.")}finally{i(!1)}},className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email address"}),r.jsx(ln,{id:"email",name:"email",type:"email",value:c.email,onChange:g,placeholder:"Enter your email",required:!0,disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(ln,{id:"password",name:"password",type:s?"text":"password",value:c.password,onChange:g,placeholder:"Enter your password",required:!0,disabled:n}),r.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",disabled:n,children:s?r.jsx(na,{className:"h-4 w-4"}):r.jsx(ia,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",disabled:n}),r.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-muted-foreground",children:"Remember me"})]}),r.jsx("div",{className:"text-sm",children:r.jsx("button",{type:"button",onClick:()=>p("/reset-password"),className:"font-medium text-primary hover:text-primary/80",disabled:n,children:"Forgot your password?"})})]}),r.jsx(on,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign in"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),r.jsxs(on,{variant:"outline",className:"w-full",onClick:async()=>{i(!0),l("");try{const{error:e}=await h();e&&l(e.message)}catch(e){l("An unexpected error occurred. Please try again.")}finally{i(!1)}},disabled:n,children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Sign in with Google"]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",r.jsx(O,{to:"/signup",className:"font-medium text-primary hover:text-primary/80",children:"Sign up for free"})]})}),r.jsx("div",{className:"text-center text-xs text-muted-foreground",children:r.jsxs("p",{children:["By signing in, you agree to our"," ",r.jsx("a",{href:"#",className:"underline hover:text-foreground",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"#",className:"underline hover:text-foreground",children:"Privacy Policy"})]})})]})})}const pn=f,xn=y,gn=A.forwardRef(({className:e,children:t,...s},a)=>r.jsxs(n,{ref:a,className:`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 ${e||""}`,...s,children:[t,r.jsx(i,{asChild:!0,children:r.jsx(Vr,{className:"h-4 w-4 opacity-50"})})]}));gn.displayName=n.displayName;const fn=A.forwardRef(({className:e,...t},s)=>r.jsx(o,{ref:s,className:`flex cursor-default items-center justify-center py-1 ${e||""}`,...t,children:r.jsx(Jr,{className:"h-4 w-4"})}));fn.displayName=o.displayName;const yn=A.forwardRef(({className:e,...t},s)=>r.jsx(l,{ref:s,className:`flex cursor-default items-center justify-center py-1 ${e||""}`,...t,children:r.jsx(Vr,{className:"h-4 w-4"})}));yn.displayName=l.displayName;const bn=A.forwardRef(({className:e,children:t,position:s="popper",...a},n)=>r.jsx(c,{children:r.jsxs(d,{ref:n,className:`relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ${"popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1"} ${e||""}`,position:s,...a,children:[r.jsx(fn,{}),r.jsx(u,{className:`p-1 ${"popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"}`,children:t}),r.jsx(yn,{})]})}));bn.displayName=d.displayName;A.forwardRef(({className:e,...t},s)=>r.jsx(h,{ref:s,className:`py-1.5 pl-8 pr-2 text-sm font-semibold ${e||""}`,...t})).displayName=h.displayName;const vn=A.forwardRef(({className:e,children:t,...s},a)=>r.jsxs(m,{ref:a,className:`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e||""}`,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(p,{children:r.jsx(Kr,{className:"h-4 w-4"})})}),r.jsx(x,{children:t})]}));vn.displayName=m.displayName;function jn(){const[e,t]=A.useState(!1),[s,a]=A.useState(!1),[n,i]=A.useState(!1),[o,l]=A.useState(""),[c,d]=A.useState(""),[u,h]=A.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",role:"tenant"}),{signUp:m,signInWithGoogle:p}=Lr();q();const x=e=>{h({...u,[e.target.name]:e.target.value})};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background py-12",children:r.jsxs("div",{className:"w-full max-w-md space-y-8 px-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:hn,alt:"Rent Control Logo",className:"h-16 w-16 object-contain"})}),r.jsx("h2",{className:"text-3xl font-bold",children:"Create your account"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Join Rent Control and start managing your properties"})]}),o&&r.jsxs(dn,{variant:"destructive",children:[r.jsx(Yr,{className:"h-4 w-4"}),r.jsx(un,{children:o})]}),c&&r.jsxs(dn,{children:[r.jsx(Qr,{className:"h-4 w-4"}),r.jsx(un,{children:c})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i(!0),l(""),d(""),u.password!==u.confirmPassword)return l("Passwords do not match"),void i(!1);if(u.password.length<6)return l("Password must be at least 6 characters long"),void i(!1);try{const{error:e}=await m(u.email,u.password,{first_name:u.firstName,last_name:u.lastName,role:u.role,full_name:`${u.firstName} ${u.lastName}`});e?l(e.message):d("Account created successfully! Please check your email to verify your account.")}catch(t){l("An unexpected error occurred. Please try again.")}finally{i(!1)}},className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium mb-2",children:"First name"}),r.jsx(ln,{id:"firstName",name:"firstName",type:"text",value:u.firstName,onChange:x,placeholder:"First name",required:!0,disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium mb-2",children:"Last name"}),r.jsx(ln,{id:"lastName",name:"lastName",type:"text",value:u.lastName,onChange:x,placeholder:"Last name",required:!0,disabled:n})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email address"}),r.jsx(ln,{id:"email",name:"email",type:"email",value:u.email,onChange:x,placeholder:"Enter your email",required:!0,disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"role",className:"block text-sm font-medium mb-2",children:"Account type"}),r.jsxs(pn,{value:u.role,onValueChange:e=>{h({...u,role:e})},disabled:n,children:[r.jsx(gn,{children:r.jsx(xn,{placeholder:"Select your role"})}),r.jsxs(bn,{children:[r.jsx(vn,{value:"tenant",children:"Tenant/Resident"}),r.jsx(vn,{value:"admin",children:"Landlord/Property Manager"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(ln,{id:"password",name:"password",type:e?"text":"password",value:u.password,onChange:x,placeholder:"Create a password",required:!0,disabled:n}),r.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",disabled:n,children:e?r.jsx(na,{className:"h-4 w-4"}):r.jsx(ia,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-2",children:"Confirm password"}),r.jsxs("div",{className:"relative",children:[r.jsx(ln,{id:"confirmPassword",name:"confirmPassword",type:s?"text":"password",value:u.confirmPassword,onChange:x,placeholder:"Confirm your password",required:!0,disabled:n}),r.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",disabled:n,children:s?r.jsx(na,{className:"h-4 w-4"}):r.jsx(ia,{className:"h-4 w-4"})})]})]}),r.jsx(on,{type:"submit",className:"w-full",disabled:n,children:n?"Creating account...":"Create account"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),r.jsxs(on,{variant:"outline",className:"w-full",onClick:async()=>{i(!0),l("");try{const{error:e}=await p();e&&l(e.message)}catch(e){l("An unexpected error occurred. Please try again.")}finally{i(!1)}},disabled:n,children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),"Sign up with Google"]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",r.jsx(O,{to:"/login",className:"font-medium text-primary hover:text-primary/80",children:"Sign in"})]})}),r.jsx("div",{className:"text-center text-xs text-muted-foreground",children:r.jsxs("p",{children:["By creating an account, you agree to our"," ",r.jsx("a",{href:"#",className:"underline hover:text-foreground",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"#",className:"underline hover:text-foreground",children:"Privacy Policy"})]})})]})})}function wn(){const[e,t]=A.useState(""),[s,a]=A.useState(!1),[n,i]=A.useState(""),[o,l]=A.useState(!1),{resetPassword:c}=Lr();return o?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"w-full max-w-md space-y-8 px-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:hn,alt:"Rent Control Logo",className:"h-16 w-16 object-contain"})}),r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(Qr,{className:"h-16 w-16 text-green-500"})}),r.jsx("h2",{className:"text-3xl font-bold",children:"Check your email"}),r.jsxs("p",{className:"mt-2 text-muted-foreground",children:["We've sent a password reset link to ",r.jsx("strong",{children:e})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Didn't receive the email? Check your spam folder or try again with a different email address."}),r.jsx(on,{variant:"outline",className:"w-full",onClick:()=>{l(!1),t("")},children:"Try again"}),r.jsx("div",{className:"text-center",children:r.jsxs(O,{to:"/login",className:"inline-flex items-center text-sm font-medium text-primary hover:text-primary/80",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Back to sign in"]})})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"w-full max-w-md space-y-8 px-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:hn,alt:"Rent Control Logo",className:"h-16 w-16 object-contain"})}),r.jsx("h2",{className:"text-3xl font-bold",children:"Reset your password"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Enter your email address and we'll send you a link to reset your password"})]}),n&&r.jsxs(dn,{variant:"destructive",children:[r.jsx(Yr,{className:"h-4 w-4"}),r.jsx(un,{children:n})]}),r.jsxs("form",{onSubmit:async t=>{t.preventDefault(),a(!0),i("");try{const{error:t}=await c(e);t?i(t.message):l(!0)}catch(s){i("An unexpected error occurred. Please try again.")}finally{a(!1)}},className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email address"}),r.jsx(ln,{id:"email",name:"email",type:"email",value:e,onChange:e=>{t(e.target.value)},placeholder:"Enter your email",required:!0,disabled:s})]}),r.jsx(on,{type:"submit",className:"w-full",disabled:s,children:s?"Sending reset link...":"Send reset link"})]}),r.jsx("div",{className:"text-center",children:r.jsxs(O,{to:"/login",className:"inline-flex items-center text-sm font-medium text-primary hover:text-primary/80",children:[r.jsx(Br,{className:"h-4 w-4 mr-2"}),"Back to sign in"]})}),r.jsx("div",{className:"text-center text-xs text-muted-foreground",children:r.jsxs("p",{children:["Remember your password?"," ",r.jsx(O,{to:"/login",className:"underline hover:text-foreground",children:"Sign in instead"})]})})]})})}A.forwardRef(({className:e,...t},s)=>r.jsx(g,{ref:s,className:`-mx-1 my-1 h-px bg-muted ${e||""}`,...t})).displayName=g.displayName;const Nn=()=>{const e=q();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-4xl w-full",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("img",{src:"/assets/RC-Logo.png",alt:"Rent Control",className:"h-12 w-auto"})}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to Rent Control"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Choose your role to get started with the world's most comprehensive property management platform"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[r.jsx("div",{onClick:()=>e("/register/landlord"),className:"bg-white rounded-2xl shadow-xl p-8 cursor-pointer transform hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-blue-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-blue-100 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:r.jsx(Gr,{className:"h-12 w-12 text-blue-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"I'm a Landlord"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Manage your properties, tenants, and rental income with powerful tools designed for property owners and managers."}),r.jsxs("div",{className:"space-y-3 mb-8",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(_a,{className:"h-4 w-4 text-green-500 mr-3"}),"Property & tenant management"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(ca,{className:"h-4 w-4 text-green-500 mr-3"}),"Global payment processing"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(ea,{className:"h-4 w-4 text-green-500 mr-3"}),"Automated rent collection"]})]}),r.jsxs("button",{className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center",children:["Get Started as Landlord",r.jsx(Fr,{className:"ml-2 h-5 w-5"})]})]})}),r.jsx("div",{onClick:()=>e("/register/tenant"),className:"bg-white rounded-2xl shadow-xl p-8 cursor-pointer transform hover:scale-105 transition-all duration-300 border-2 border-transparent hover:border-green-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-green-100 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:r.jsx(Ea,{className:"h-12 w-12 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"I'm a Tenant"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Access your tenant portal to pay rent, submit maintenance requests, and communicate with your landlord."}),r.jsxs("div",{className:"space-y-3 mb-8",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(_a,{className:"h-4 w-4 text-green-500 mr-3"}),"Online rent payments"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(ca,{className:"h-4 w-4 text-green-500 mr-3"}),"Maintenance requests"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(ea,{className:"h-4 w-4 text-green-500 mr-3"}),"Lease management"]})]}),r.jsxs("button",{className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center",children:["Get Started as Tenant",r.jsx(Fr,{className:"ml-2 h-5 w-5"})]})]})})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",r.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Sign in here"})]})}),r.jsxs("div",{className:"mt-12 text-center",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Trusted by 10,000+ property managers globally"}),r.jsxs("div",{className:"flex justify-center items-center space-x-8 text-xs text-gray-400",children:[r.jsx("span",{children:"🔒 Bank-level security"}),r.jsx("span",{children:"🌍 Global coverage"}),r.jsx("span",{children:"📱 Mobile-first design"}),r.jsx("span",{children:"⚡ Real-time updates"})]})]})]})})},kn=()=>{const e=q(),{signUp:t}=Lr(),[s,a]=A.useState(1),[n,i]=A.useState(!1),[o,l]=A.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",company:"",propertyName:"",propertyAddress:"",propertyCity:"",propertyState:"",propertyZip:"",propertyCountry:"United States",propertyType:"apartment",totalUnits:1}),c=e=>{l({...o,[e.target.name]:e.target.value})};return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("img",{src:"/assets/RC-Logo.png",alt:"Rent Control",className:"h-10 w-auto"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Landlord Registration"})]}),r.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(e===s?"bg-blue-600 text-white":e<s?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:e<s?r.jsx(Kr,{className:"h-5 w-5"}):e}),e<3&&r.jsx("div",{className:"w-16 h-1 mx-2 "+(e<s?"bg-green-600":"bg-gray-200")})]},e))}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:r.jsxs("form",{onSubmit:3===s?async s=>{s.preventDefault(),i(!0);try{const{user:s,error:r}=await t(o.email,o.password,{role:"admin",plan:"free",first_name:o.firstName,last_name:o.lastName,phone:o.phone,company:o.company});if(r)throw r;e("/admin/dashboard")}catch(r){console.error("Registration error:",r),alert("Registration failed. Please try again.")}finally{i(!1)}}:e=>e.preventDefault(),children:[1===s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create Your Account"}),r.jsx("p",{className:"text-gray-600",children:"Let's start with your basic account information"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),r.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),r.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Doe",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",name:"email",value:o.email,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com",required:!0})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:o.password,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsx("input",{type:"password",name:"confirmPassword",value:o.confirmPassword,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company (Optional)"}),r.jsx("input",{type:"text",name:"company",value:o.company,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ABC Property Management"})]})]})]}),2===s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add Your First Property"}),r.jsx("p",{className:"text-gray-600",children:"Start with your first property to get familiar with the platform"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Name"}),r.jsx("input",{type:"text",name:"propertyName",value:o.propertyName,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Sunset Apartments",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Address"}),r.jsx("input",{type:"text",name:"propertyAddress",value:o.propertyAddress,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Main Street",required:!0})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{type:"text",name:"propertyCity",value:o.propertyCity,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"New York",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),r.jsx("input",{type:"text",name:"propertyState",value:o.propertyState,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"NY",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code"}),r.jsx("input",{type:"text",name:"propertyZip",value:o.propertyZip,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10001",required:!0})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),r.jsxs("select",{name:"propertyType",value:o.propertyType,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"apartment",children:"Apartment Building"}),r.jsx("option",{value:"house",children:"Single Family House"}),r.jsx("option",{value:"condo",children:"Condominium"}),r.jsx("option",{value:"townhouse",children:"Townhouse"}),r.jsx("option",{value:"commercial",children:"Commercial Property"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Units"}),r.jsx("input",{type:"number",name:"totalUnits",value:o.totalUnits,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]})]})]}),3===s&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review & Complete"}),r.jsx("p",{className:"text-gray-600",children:"Review your information and complete your registration"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Account Information"}),r.jsxs("p",{className:"text-gray-600",children:[o.firstName," ",o.lastName]}),r.jsx("p",{className:"text-gray-600",children:o.email}),o.company&&r.jsx("p",{className:"text-gray-600",children:o.company})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"First Property"}),r.jsx("p",{className:"text-gray-600",children:o.propertyName}),r.jsxs("p",{className:"text-gray-600",children:[o.propertyAddress,", ",o.propertyCity,", ",o.propertyState," ",o.propertyZip]}),r.jsxs("p",{className:"text-gray-600",children:[o.totalUnits," unit(s)"]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"🎉 Free Plan Activated"}),r.jsx("p",{className:"text-blue-800 text-sm",children:"Your account will start with our Free plan, which includes management for 1 property. You can upgrade anytime to add more properties and unlock advanced features."})]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["By completing registration, you agree to our"," ",r.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"}),"."]})]}),r.jsxs("div",{className:"flex justify-between mt-8",children:[r.jsxs("button",{type:"button",onClick:()=>1===s?e("/register"):void(s>1&&a(s-1)),className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:[r.jsx(Br,{className:"mr-2 h-5 w-5"}),1===s?"Back to Role Selection":"Previous"]}),s<3?r.jsxs("button",{type:"button",onClick:()=>{s<3&&a(s+1)},className:"flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Next",r.jsx(Fr,{className:"ml-2 h-5 w-5"})]}):r.jsxs("button",{type:"submit",disabled:n,className:"flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[n?"Creating Account...":"Complete Registration",r.jsx(Kr,{className:"ml-2 h-5 w-5"})]})]})]})}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",r.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Sign in here"})]})})]})})},_n=()=>{const e=q(),{signUp:t}=Lr(),[s]=M(),[a,n]=A.useState(!1),[i,o]=A.useState(null),[l,c]=A.useState(null),[d,u]=A.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",phone:""});A.useEffect(()=>{s.get("token")&&h()},[s]);const h=async e=>{try{await new Promise(e=>setTimeout(e,1e3));const e={email:"john.doe@example.com",propertyName:"Sunset Apartments",propertyAddress:"123 Main St, Apt 4B",landlordName:"Sarah Johnson",unitDetails:{unit:"4B",rent:2500,moveInDate:"2024-02-01"}};o(e),u(t=>({...t,email:e.email}))}catch(t){c("Invalid or expired invitation link. Please contact your landlord for a new invitation.")}},m=e=>{u({...d,[e.target.name]:e.target.value})};return l?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"bg-red-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:r.jsx(Yr,{className:"h-8 w-8 text-red-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Invalid Invitation"}),r.jsx("p",{className:"text-gray-600 mb-6",children:l}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>e("/register/tenant"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:"Register Without Invitation"}),r.jsx("button",{onClick:()=>e("/"),className:"w-full text-gray-600 hover:text-gray-800 transition-colors",children:"Back to Home"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("img",{src:"/assets/RC-Logo.png",alt:"Rent Control",className:"h-10 w-auto"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i?"Complete Your Registration":"Tenant Registration"}),r.jsx("p",{className:"text-gray-600 mt-2",children:i?"You're almost ready to access your tenant portal":"Create your tenant account to get started"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[i?r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-4",children:r.jsx(ua,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"You've been invited!"}),r.jsxs("div",{className:"space-y-2 text-sm text-green-800",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Property:"})," ",i.propertyName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," ",i.propertyAddress]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Landlord:"})," ",i.landlordName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Unit:"})," ",i.unitDetails.unit]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Monthly Rent:"})," $",i.unitDetails.rent]})]})]})]})}):null,i?null:r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-4",children:r.jsx(Yr,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"No invitation link?"}),r.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"You can still create your account. Once your landlord invites you to a property, you'll be able to access your tenant portal and all features."}),r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Next steps:"})," Ask your landlord to send you an invitation through their dashboard."]})]})]})}),r.jsxs("form",{onSubmit:async r=>{r.preventDefault(),n(!0);try{if(d.password!==d.confirmPassword)throw new Error("Passwords do not match");const{user:r,error:a}=await t(d.email,d.password,{role:"tenant",first_name:d.firstName,last_name:d.lastName,phone:d.phone,invite_token:s.get("token"),status:i?"active":"pending_invitation"});if(a)throw a;e(i?"/resident/dashboard":"/tenant/pending")}catch(a){console.error("Registration error:",a),alert(a.message||"Registration failed. Please try again.")}finally{n(!1)}},className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),r.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),r.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Doe",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{type:"email",name:"email",value:d.email,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"john@example.com",disabled:!!i,required:!0}),i&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email pre-filled from invitation"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{type:"tel",name:"phone",value:d.phone,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsx("input",{type:"password",name:"password",value:d.password,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"••••••••",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsx("input",{type:"password",name:"confirmPassword",value:d.confirmPassword,onChange:m,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["By creating an account, you agree to our"," ",r.jsx("a",{href:"/terms",className:"text-green-600 hover:underline",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"/privacy",className:"text-green-600 hover:underline",children:"Privacy Policy"}),"."]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):r.jsxs(r.Fragment,{children:[i?"Complete Registration":"Create Account",r.jsx(Fr,{className:"ml-2 h-5 w-5"})]})})]}),r.jsxs("div",{className:"flex justify-between items-center mt-6 pt-6 border-t",children:[r.jsxs("button",{onClick:()=>e("/register"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[r.jsx(Br,{className:"mr-2 h-5 w-5"}),"Back to Role Selection"]}),r.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",r.jsx("button",{onClick:()=>e("/login"),className:"text-green-600 hover:text-green-700 font-semibold",children:"Sign in"})]})]})]}),r.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"What happens next?"}),r.jsx("div",{className:"space-y-3",children:i?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Kr,{className:"h-4 w-4 text-green-500 mr-3"}),"Immediate access to your tenant portal"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Kr,{className:"h-4 w-4 text-green-500 mr-3"}),"View lease details and property information"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Kr,{className:"h-4 w-4 text-green-500 mr-3"}),"Submit maintenance requests and pay rent online"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Yr,{className:"h-4 w-4 text-blue-500 mr-3"}),"Your account will be created but pending activation"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Yr,{className:"h-4 w-4 text-blue-500 mr-3"}),"Ask your landlord to send you an invitation"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx(Yr,{className:"h-4 w-4 text-blue-500 mr-3"}),"Once invited, you'll have full access to the tenant portal"]})]})})]})]})})},Sn=()=>{const e=q();return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-2xl w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("img",{src:"/assets/RC-Logo.png",alt:"Rent Control",className:"h-12 w-auto"})}),r.jsx("div",{className:"bg-blue-100 p-4 rounded-full w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:r.jsx(Xr,{className:"h-10 w-10 text-blue-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Account Created Successfully!"}),r.jsx("p",{className:"text-xl text-gray-600",children:"Your landlord must invite you to activate your account"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"What's Next?"}),r.jsx("p",{className:"text-gray-600",children:"Your tenant account has been created, but you'll need an invitation from your landlord to access your tenant portal and property information."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4 flex-shrink-0",children:r.jsx(xa,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"1. Contact Your Landlord"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Reach out to your landlord or property manager and let them know you've created a Rent Control account. Provide them with your email address."})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"bg-green-100 p-3 rounded-lg mr-4 flex-shrink-0",children:r.jsx(ua,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"2. Wait for Invitation"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Your landlord will send you an invitation through their Rent Control dashboard. This will link your account to your specific property and unit."})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"bg-purple-100 p-3 rounded-lg mr-4 flex-shrink-0",children:r.jsx(Fr,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"3. Access Your Portal"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Once invited, you'll be able to log in and access your tenant portal with lease information, payment options, and maintenance request features."})]})]})]}),r.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:"• Make sure your landlord has a Rent Control account"}),r.jsx("p",{children:'• Ask them to look for the "Invite Tenant" feature in their dashboard'}),r.jsx("p",{children:"• Check your email (including spam folder) for the invitation"}),r.jsx("p",{children:"• Contact support if you don't receive an invitation within 24 hours"})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:()=>e("/login"),className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Logging In"}),r.jsx("button",{onClick:()=>e("/contact"),className:"px-8 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Contact Support"})]}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Your account email: ",r.jsx("span",{className:"font-medium",children:"Check your profile for details"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Landlords can find the invite feature in their dashboard under "Tenants" → "Invite Tenant"'})]})]})})};function Cn({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:an("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function Pn({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:an("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Tn({className:e,...t}){return r.jsx("div",{"data-slot":"card-title",className:an("leading-none font-semibold",e),...t})}function En({className:e,...t}){return r.jsx("div",{"data-slot":"card-description",className:an("text-muted-foreground text-sm",e),...t})}function An({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:an("px-6",e),...t})}function Rn(){const[e,t]=A.useState("overview"),[s,a]=A.useState(!1),[n,i]=A.useState(!1),[o,l]=A.useState(!1),[c,d]=A.useState({firstName:"",lastName:"",email:"",message:""}),u=[{id:1,address:"123 Main St, Apt 4B",city:"New York",state:"NY",rent_amount:2500,tenant_name:"John Smith",tenant_email:"john.smith@email.com",lease_start:"2024-01-01",lease_end:"2024-12-31",status:"occupied"},{id:2,address:"456 Oak Ave, Unit 2A",city:"Los Angeles",state:"CA",rent_amount:3200,tenant_name:"Sarah Johnson",tenant_email:"sarah.j@email.com",lease_start:"2024-02-15",lease_end:"2025-02-14",status:"occupied"},{id:3,address:"789 Pine St, Suite 1",city:"Chicago",state:"IL",rent_amount:1800,tenant_name:null,tenant_email:null,lease_start:null,lease_end:null,status:"vacant"}],h=[{id:1,property_address:"123 Main St, Apt 4B",tenant_name:"John Smith",issue:"Leaky faucet in kitchen",priority:"medium",status:"pending",created_at:"2024-01-20",description:"The kitchen faucet has been dripping for the past week."},{id:2,property_address:"456 Oak Ave, Unit 2A",tenant_name:"Sarah Johnson",issue:"Heating not working",priority:"high",status:"in_progress",created_at:"2024-01-18",description:"No heat in the apartment, very cold."},{id:3,property_address:"123 Main St, Apt 4B",tenant_name:"John Smith",issue:"Light bulb replacement",priority:"low",status:"completed",created_at:"2024-01-15",description:"Bathroom light bulb needs replacement."}],m=u.length,p=u.filter(e=>"occupied"===e.status).length,x=Math.round(p/m*100),g=u.reduce((e,t)=>e+(t.rent_amount||0),0),f=h.filter(e=>"pending"===e.status).length,y=[{title:"Total Properties",value:m.toString(),change:`${p} occupied`,icon:Gr,color:"text-blue-600"},{title:"Active Tenants",value:p.toString(),change:`${x}% occupancy`,icon:Ea,color:"text-green-600"},{title:"Monthly Revenue",value:`$${g.toLocaleString()}`,change:"From active leases",icon:ta,color:"text-yellow-600"},{title:"Maintenance Requests",value:f.toString(),change:`${h.length} total`,icon:Ia,color:"text-red-600"}],b=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=e=>{switch(e){case"completed":return r.jsx(Qr,{className:"h-4 w-4 text-green-600"});case"in_progress":return r.jsx(Xr,{className:"h-4 w-4 text-yellow-600"});case"pending":return r.jsx(Yr,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Xr,{className:"h-4 w-4 text-gray-600"})}};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b bg-card",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Admin Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's your property overview."})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(on,{variant:"outline",size:"sm",children:[r.jsx(ka,{className:"h-4 w-4 mr-2"}),"Settings"]}),r.jsx(on,{variant:"outline",size:"sm",asChild:!0,children:r.jsxs(O,{to:"/",children:[r.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:y.map((e,t)=>r.jsxs(Cn,{children:[r.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Tn,{className:"text-sm font-medium",children:e.title}),r.jsx(e.icon,{className:`h-4 w-4 ${e.color}`})]}),r.jsxs(An,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.value}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.change})]})]},t))}),r.jsxs("div",{className:"flex space-x-1 mb-6",children:[r.jsx(on,{variant:"overview"===e?"default":"ghost",onClick:()=>t("overview"),children:"Overview"}),r.jsx(on,{variant:"properties"===e?"default":"ghost",onClick:()=>t("properties"),children:"Properties"}),r.jsx(on,{variant:"maintenance"===e?"default":"ghost",onClick:()=>t("maintenance"),children:"Maintenance"}),r.jsx(on,{variant:"tenants"===e?"default":"ghost",onClick:()=>t("tenants"),children:"Tenants"})]}),"overview"===e&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Cn,{children:[r.jsxs(Pn,{children:[r.jsx(Tn,{children:"Recent Properties"}),r.jsx(En,{children:"Your latest property additions"})]}),r.jsx(An,{children:r.jsx("div",{className:"space-y-4",children:u.slice(0,3).map(e=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.address}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.city,", ",e.state]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-medium",children:["$",e.rent_amount,"/mo"]}),r.jsx(Ka,{variant:"occupied"===e.status?"default":"secondary",children:e.status})]})]},e.id))})})]}),r.jsxs(Cn,{children:[r.jsxs(Pn,{children:[r.jsx(Tn,{children:"Recent Maintenance"}),r.jsx(En,{children:"Latest maintenance requests"})]}),r.jsx(An,{children:r.jsx("div",{className:"space-y-4",children:h.slice(0,3).map(e=>r.jsxs("div",{className:"flex items-start space-x-3",children:[v(e.status),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:e.issue}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.property_address}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx(Ka,{className:b(e.priority),children:e.priority}),r.jsx("span",{className:"text-xs text-muted-foreground",children:e.created_at})]})]})]},e.id))})})]})]}),"properties"===e&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Properties"}),r.jsxs(on,{children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Property"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>r.jsxs(Cn,{children:[r.jsxs(Pn,{children:[r.jsx(Tn,{className:"text-lg",children:e.address}),r.jsxs(En,{children:[e.city,", ",e.state]})]}),r.jsx(An,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Rent:"}),r.jsxs("span",{className:"font-medium",children:["$",e.rent_amount,"/mo"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),r.jsx(Ka,{variant:"occupied"===e.status?"default":"secondary",children:e.status})]}),e.tenant_name&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx("p",{className:"text-sm font-medium",children:e.tenant_name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:e.tenant_email})]})]})})]},e.id))})]}),"maintenance"===e&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Maintenance Requests"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(on,{variant:"outline",size:"sm",children:[r.jsx(la,{className:"h-4 w-4 mr-2"}),"Filter"]}),r.jsxs(on,{variant:"outline",size:"sm",children:[r.jsx(wa,{className:"h-4 w-4 mr-2"}),"Search"]})]})]}),r.jsx("div",{className:"space-y-4",children:h.map(e=>r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx(Tn,{className:"text-lg",children:e.issue}),r.jsx(En,{children:e.property_address})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[v(e.status),r.jsx(Ka,{className:b(e.priority),children:e.priority})]})]})}),r.jsxs(An,{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Tenant: ",e.tenant_name]}),r.jsxs("span",{children:["Created: ",e.created_at]})]}),r.jsx(on,{size:"sm",children:"View Details"})]})]})]},e.id))})]}),"tenants"===e&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Tenants"}),r.jsxs(on,{onClick:()=>a(!0),children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Invite Tenant"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.filter(e=>e.tenant_name).map(e=>r.jsxs(Cn,{children:[r.jsxs(Pn,{children:[r.jsx(Tn,{className:"text-lg",children:e.tenant_name}),r.jsx(En,{children:e.address})]}),r.jsx(An,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xa,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:e.tenant_email})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ta,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm",children:["$",e.rent_amount,"/month"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ga,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm",children:[e.city,", ",e.state]})]}),r.jsx("div",{className:"pt-2 border-t",children:r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Lease: ",e.lease_start," to ",e.lease_end]})})]})})]},e.id))})]})]}),s&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>!n&&a(!1)}),r.jsxs("div",{className:"fixed left-1/2 top-1/2 z-50 w-full max-w-md -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg border p-6",children:[r.jsx("button",{onClick:()=>!n&&a(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 transition-opacity",disabled:n,children:r.jsx(Oa,{className:"h-4 w-4"})}),o?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(Qr,{className:"h-8 w-8 text-green-600"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Invitation Sent!"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Tenant invitation has been sent to ",c.email]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[r.jsx(xa,{className:"h-5 w-5 mr-2"}),"Invite New Tenant"]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send an invitation to a new tenant to join your property."})]}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),await new Promise(e=>setTimeout(e,2e3)),i(!1),l(!0),setTimeout(()=>{d({firstName:"",lastName:"",email:"",message:""}),l(!1),a(!1)},2e3)},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"First Name"}),r.jsx("input",{type:"text",value:c.firstName,onChange:e=>d({...c,firstName:e.target.value}),placeholder:"John",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Last Name"}),r.jsx("input",{type:"text",value:c.lastName,onChange:e=>d({...c,lastName:e.target.value}),placeholder:"Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),r.jsx("input",{type:"email",value:c.email,onChange:e=>d({...c,email:e.target.value}),placeholder:"john.doe@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:n})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Property"}),r.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:n,children:r.jsx("option",{children:"789 Pine St, Suite 1 - $1800/month"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Personal Message (Optional)"}),r.jsx("textarea",{value:c.message,onChange:e=>d({...c,message:e.target.value}),placeholder:"Welcome to your new home!",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",disabled:n})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(on,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:n,children:"Cancel"}),r.jsx(on,{type:"submit",disabled:n||!c.email||!c.firstName||!c.lastName,className:"bg-blue-600 hover:bg-blue-700 text-white",children:n?"Sending...":"Send Invitation"})]})]})]})]})]})]})}function Ln({isOpen:e,onClose:t,properties:s=[]}){const[a,n]=A.useState(1),[i,o]=A.useState(!1),[l,c]=A.useState(""),[d,u]=A.useState(!1),[h,m]=A.useState({email:"",firstName:"",lastName:"",propertyId:"",message:""}),p=e=>{m({...h,[e.target.name]:e.target.value})},x=()=>{n(1),u(!1),c(""),m({email:"",firstName:"",lastName:"",propertyId:"",message:""}),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[r.jsxs("h2",{className:"text-xl font-semibold",children:[1===a&&"Invite New Tenant",2===a&&"Review Invitation",3===a&&"Invitation Sent!"]}),r.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Oa,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-6",children:[l&&r.jsx(dn,{variant:"destructive",className:"mb-4",children:r.jsx(un,{children:l})}),1===a&&r.jsxs("form",{onSubmit:e=>{e.preventDefault(),n(2)},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium mb-1",children:"First Name"}),r.jsx(ln,{id:"firstName",name:"firstName",type:"text",value:h.firstName,onChange:p,placeholder:"John",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium mb-1",children:"Last Name"}),r.jsx(ln,{id:"lastName",name:"lastName",type:"text",value:h.lastName,onChange:p,placeholder:"Doe",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Email Address"}),r.jsx(ln,{id:"email",name:"email",type:"email",value:h.email,onChange:p,placeholder:"john.doe@example.com",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"propertyId",className:"block text-sm font-medium mb-1",children:"Assign to Property"}),r.jsxs("select",{id:"propertyId",name:"propertyId",value:h.propertyId,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select a property"}),r.jsx("option",{value:"1",children:"Sunset Apartments - Unit 101"}),r.jsx("option",{value:"2",children:"Downtown Loft - Unit 5B"}),r.jsx("option",{value:"3",children:"Garden View Complex - Unit 12A"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium mb-1",children:"Personal Message (Optional)"}),r.jsx("textarea",{id:"message",name:"message",value:h.message,onChange:p,placeholder:"Welcome to your new home! I'm excited to have you as a tenant...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(on,{type:"button",variant:"outline",onClick:x,className:"flex-1",children:"Cancel"}),r.jsx(on,{type:"submit",className:"flex-1",children:"Review Invitation"})]})]}),2===a&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ta,{className:"h-4 w-4 text-gray-600"}),r.jsxs("span",{className:"font-medium",children:[h.firstName," ",h.lastName]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xa,{className:"h-4 w-4 text-gray-600"}),r.jsx("span",{children:h.email})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ua,{className:"h-4 w-4 text-gray-600"}),r.jsxs("span",{children:["1"===h.propertyId&&"Sunset Apartments - Unit 101","2"===h.propertyId&&"Downtown Loft - Unit 5B","3"===h.propertyId&&"Garden View Complex - Unit 12A"]})]})]}),h.message&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Personal Message:"}),r.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 text-sm",children:h.message})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),r.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[r.jsx("li",{children:"• Tenant will receive an email invitation"}),r.jsx("li",{children:"• They can create their account and access their portal"}),r.jsx("li",{children:"• You'll be notified when they accept the invitation"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(on,{type:"button",variant:"outline",onClick:()=>n(1),className:"flex-1",children:"Back"}),r.jsx(on,{onClick:async e=>{e.preventDefault(),o(!0),c("");try{await new Promise(e=>setTimeout(e,2e3)),u(!0),n(3)}catch(t){c("Failed to send invitation. Please try again.")}finally{o(!1)}},disabled:i,className:"flex-1",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Na,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})})]})]}),3===a&&d&&r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(Qr,{className:"h-16 w-16 text-green-500"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invitation Sent Successfully!"}),r.jsxs("p",{className:"text-gray-600",children:[h.firstName," ",h.lastName," will receive an email invitation at"," ",r.jsx("strong",{children:h.email})]})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-left",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Next Steps:"}),r.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[r.jsx("li",{children:"• The tenant will receive the invitation within a few minutes"}),r.jsx("li",{children:"• They can sign up and access their tenant portal"}),r.jsx("li",{children:"• You'll see them in your tenant list once they accept"}),r.jsx("li",{children:"• You can resend the invitation if needed"})]})]}),r.jsx(on,{onClick:x,className:"w-full",children:"Done"})]})]})]})}):null}function In(){const[e,t]=A.useState("overview"),[s,a]=A.useState(!1),n=[{label:"Total Properties",value:"12",icon:ua,color:"bg-blue-500"},{label:"Active Tenants",value:"28",icon:Ea,color:"bg-green-500"},{label:"Monthly Revenue",value:"$24,500",icon:ta,color:"bg-purple-500"},{label:"Maintenance Requests",value:"3",icon:Ia,color:"bg-orange-500"}],i=[{id:1,name:"Sunset Apartments",address:"123 Main St, Downtown",units:8,occupied:7,revenue:"$8,400"},{id:2,name:"Garden View Complex",address:"456 Oak Ave, Midtown",units:12,occupied:11,revenue:"$13,200"},{id:3,name:"Downtown Lofts",address:"789 Pine St, City Center",units:6,occupied:5,revenue:"$7,500"}],o=e=>{switch(e){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},l=e=>{switch(e){case"Paid":return"bg-green-100 text-green-800";case"Due":case"Open":return"bg-red-100 text-red-800";case"In Progress":return"bg-blue-100 text-blue-800";case"Scheduled":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Property Management Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Manage your properties, tenants, and maintenance requests"})]}),r.jsxs(on,{onClick:()=>a(!0),children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Invite Tenant"]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:n.map((e,t)=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:r.jsx(e.icon,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.label}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})},t))}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"Overview"},{id:"properties",label:"Properties"},{id:"tenants",label:"Tenants"},{id:"maintenance",label:"Maintenance"}].map(s=>r.jsx("button",{onClick:()=>t(s.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:s.label},s.id))})}),r.jsxs("div",{className:"p-6",children:["overview"===e&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"New tenant moved in"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Mike Chen - Downtown Lofts Unit 12A"})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"2 days ago"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Maintenance request submitted"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Heating issue - Garden View Complex"})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"3 days ago"})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Rent payment received"}),r.jsx("p",{className:"text-sm text-gray-600",children:"John Smith - $1,200"})]}),r.jsx("span",{className:"text-sm text-gray-500",children:"5 days ago"})]})]})]})}),"properties"===e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Properties"}),r.jsxs(on,{variant:"outline",children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Property"]})]}),r.jsx("div",{className:"grid gap-4",children:i.map(e=>r.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-lg",children:e.name}),r.jsxs("p",{className:"text-gray-600 flex items-center mt-1",children:[r.jsx(ga,{className:"h-4 w-4 mr-1"}),e.address]}),r.jsxs("div",{className:"flex gap-4 mt-3 text-sm",children:[r.jsxs("span",{children:["Units: ",e.units]}),r.jsxs("span",{children:["Occupied: ",e.occupied,"/",e.units]}),r.jsxs("span",{className:"font-medium text-green-600",children:["Revenue: ",e.revenue]})]})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(ra,{className:"h-5 w-5"})})]})},e.id))})]}),"tenants"===e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tenants"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(ln,{placeholder:"Search tenants...",className:"pl-10 w-64"})]}),r.jsxs(on,{variant:"outline",children:[r.jsx(la,{className:"h-4 w-4 mr-2"}),"Filter"]}),r.jsxs(on,{onClick:()=>a(!0),children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Invite Tenant"]})]})]}),r.jsx("div",{className:"grid gap-4",children:[{id:1,name:"John Smith",email:"john.smith@email.com",phone:"+1 (555) 123-4567",property:"Sunset Apartments - Unit 101",rentStatus:"Paid",moveInDate:"2023-06-15"},{id:2,name:"Sarah Johnson",email:"sarah.j@email.com",phone:"+1 (555) 234-5678",property:"Garden View Complex - Unit 5B",rentStatus:"Due",moveInDate:"2023-08-01"},{id:3,name:"Mike Chen",email:"mike.chen@email.com",phone:"+1 (555) 345-6789",property:"Downtown Lofts - Unit 12A",rentStatus:"Paid",moveInDate:"2023-09-10"}].map(e=>r.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h4",{className:"font-semibold text-lg",children:e.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(e.rentStatus)}`,children:e.rentStatus})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("p",{className:"flex items-center",children:[r.jsx(xa,{className:"h-4 w-4 mr-2"}),e.email]}),r.jsxs("p",{className:"flex items-center",children:[r.jsx(ba,{className:"h-4 w-4 mr-2"}),e.phone]}),r.jsxs("p",{className:"flex items-center",children:[r.jsx(ua,{className:"h-4 w-4 mr-2"}),e.property]}),r.jsxs("p",{className:"text-xs",children:["Move-in: ",new Date(e.moveInDate).toLocaleDateString()]})]})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(ra,{className:"h-5 w-5"})})]})},e.id))})]}),"maintenance"===e&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Maintenance Requests"}),r.jsxs(on,{variant:"outline",children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Add Request"]})]}),r.jsx("div",{className:"grid gap-4",children:[{id:1,property:"Sunset Apartments - Unit 101",tenant:"John Smith",issue:"Leaky faucet in kitchen",priority:"Medium",status:"In Progress",date:"2024-01-15"},{id:2,property:"Garden View Complex - Unit 5B",tenant:"Sarah Johnson",issue:"Heating not working properly",priority:"High",status:"Open",date:"2024-01-14"},{id:3,property:"Downtown Lofts - Unit 12A",tenant:"Mike Chen",issue:"Light fixture replacement needed",priority:"Low",status:"Scheduled",date:"2024-01-13"}].map(e=>r.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h4",{className:"font-semibold",children:e.issue}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(e.priority)}`,children:e.priority}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l(e.status)}`,children:e.status})]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Property:"})," ",e.property]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tenant:"})," ",e.tenant]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Submitted:"})," ",new Date(e.date).toLocaleDateString()]})]})]}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(ra,{className:"h-5 w-5"})})]})},e.id))})]})]})]})]}),r.jsx(Ln,{isOpen:s,onClose:()=>a(!1),properties:i})]})}const On=(e=null)=>{const[t,s]=A.useState([]),[r,a]=A.useState(!0),[n,i]=A.useState(null);A.useEffect(()=>{let t=!0;const r=async()=>{try{a(!0),i(null);const r=await sn();if(!r)return void(t&&(s([]),a(!1)));let n=tn.from("maintenance_requests").select("\n            *,\n            property:properties(\n              id,\n              address,\n              unit_number\n            ),\n            tenant:profiles!maintenance_requests_tenant_id_fkey(\n              id,\n              full_name,\n              email,\n              phone\n            )\n          ");"tenant"===e?n=n.eq("tenant_id",r.id):"admin"===e&&(n=n.in("property_id",tn.from("properties").select("id").eq("owner_id",r.id))),n=n.order("created_at",{ascending:!1});const{data:o,error:l}=await n;if(l)throw l;t&&s(o||[])}catch(r){console.error("Error fetching maintenance requests:",r),t&&i(r.message)}finally{t&&a(!1)}};r();const n=tn.channel("maintenance_requests_changes").on("postgres_changes",{event:"*",schema:"public",table:"maintenance_requests"},()=>{r()}).subscribe();return()=>{t=!1,n.unsubscribe()}},[e]);const o={pending:t.filter(e=>"pending"===e.status),in_progress:t.filter(e=>"in_progress"===e.status),completed:t.filter(e=>"completed"===e.status),cancelled:t.filter(e=>"cancelled"===e.status)};return{requests:t,groupedRequests:o,loading:r,error:n,createRequest:async e=>{try{const t=await sn();if(!t)throw new Error("No authenticated user");const{data:r,error:a}=await tn.from("maintenance_requests").insert([{...e,tenant_id:t.id,status:"pending"}]).select("\n          *,\n          property:properties(\n            id,\n            address,\n            unit_number\n          ),\n          tenant:profiles!maintenance_requests_tenant_id_fkey(\n            id,\n            full_name,\n            email,\n            phone\n          )\n        ").single();if(a)throw a;return s(e=>[r,...e]),{data:r,error:null}}catch(t){return console.error("Error creating maintenance request:",t),{data:null,error:t.message}}},updateRequestStatus:async(e,t,r=null)=>{try{const a={status:t};r&&(a.admin_notes=r);const{data:n,error:i}=await tn.from("maintenance_requests").update(a).eq("id",e).select("\n          *,\n          property:properties(\n            id,\n            address,\n            unit_number\n          ),\n          tenant:profiles!maintenance_requests_tenant_id_fkey(\n            id,\n            full_name,\n            email,\n            phone\n          )\n        ").single();if(i)throw i;return s(t=>t.map(t=>t.id===e?n:t)),{data:n,error:null}}catch(a){return console.error("Error updating maintenance request:",a),{data:null,error:a.message}}},deleteRequest:async e=>{try{const{error:t}=await tn.from("maintenance_requests").delete().eq("id",e);if(t)throw t;return s(t=>t.filter(t=>t.id!==e)),{error:null}}catch(t){return console.error("Error deleting maintenance request:",t),{error:t.message}}},refetch:()=>{fetchMaintenanceRequests()}}};function qn({className:e,...t}){return r.jsx("div",{className:an("animate-pulse rounded-md bg-muted",e),...t})}var Mn=A.forwardRef((e,t)=>r.jsx(b.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Mn.displayName="Label";var $n=Mn;function Dn({className:e,...t}){return r.jsx($n,{"data-slot":"label",className:an("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Un=A.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:s,...t}));Un.displayName="Textarea";const Bn=S,Fn=C,zn=j,Wn=A.forwardRef(({className:e,...t},s)=>r.jsx(v,{ref:s,className:an("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Wn.displayName=v.displayName;const Gn=A.forwardRef(({className:e,children:t,...s},a)=>r.jsxs(zn,{children:[r.jsx(Wn,{}),r.jsxs(w,{ref:a,className:an("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,r.jsxs(N,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Oa,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Gn.displayName=w.displayName;const Hn=({className:e,...t})=>r.jsx("div",{className:an("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Hn.displayName="DialogHeader";const Kn=({className:e,...t})=>r.jsx("div",{className:an("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Kn.displayName="DialogFooter";const Vn=A.forwardRef(({className:e,...t},s)=>r.jsx(k,{ref:s,className:an("text-lg font-semibold leading-none tracking-tight",e),...t}));Vn.displayName=k.displayName;const Jn=A.forwardRef(({className:e,...t},s)=>r.jsx(_,{ref:s,className:an("text-sm text-muted-foreground",e),...t}));function Yn({trigger:e,onSuccess:t}){const[s,a]=A.useState(!1),[n,i]=A.useState(!1),{createRequest:o}=On("tenant"),{user:l}=Lr(),[c,d]=A.useState({title:"",description:"",priority:"medium",category:"",location:""}),u=(e,t)=>{d(s=>({...s,[e]:t}))};return r.jsxs(Bn,{open:s,onOpenChange:a,children:[r.jsx(Fn,{asChild:!0,children:e||r.jsxs(on,{children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"New Request"]})}),r.jsxs(Gn,{className:"sm:max-w-[500px]",children:[r.jsxs(Hn,{children:[r.jsxs(Vn,{className:"flex items-center",children:[r.jsx(Ia,{className:"h-5 w-5 mr-2"}),"Submit Maintenance Request"]}),r.jsx(Jn,{children:"Describe the maintenance issue you're experiencing. We'll get back to you as soon as possible."})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l){i(!0);try{const e={...c,tenant_id:l.id,status:"pending"},{data:s,error:r}=await o(e);if(r)throw new Error(r);d({title:"",description:"",priority:"medium",category:"",location:""}),a(!1),t&&t(s)}catch(s){console.error("Error creating maintenance request:",s),alert("Failed to create maintenance request. Please try again.")}finally{i(!1)}}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Dn,{htmlFor:"title",children:"Issue Title *"}),r.jsx(ln,{id:"title",value:c.title,onChange:e=>u("title",e.target.value),placeholder:"Brief description of the issue",required:!0})]}),r.jsxs("div",{children:[r.jsx(Dn,{htmlFor:"category",children:"Category *"}),r.jsxs(pn,{value:c.category,onValueChange:e=>u("category",e),children:[r.jsx(gn,{children:r.jsx(xn,{placeholder:"Select category"})}),r.jsxs(bn,{children:[r.jsx(vn,{value:"plumbing",children:"Plumbing"}),r.jsx(vn,{value:"electrical",children:"Electrical"}),r.jsx(vn,{value:"hvac",children:"HVAC/Heating/Cooling"}),r.jsx(vn,{value:"appliances",children:"Appliances"}),r.jsx(vn,{value:"flooring",children:"Flooring"}),r.jsx(vn,{value:"windows_doors",children:"Windows/Doors"}),r.jsx(vn,{value:"pest_control",children:"Pest Control"}),r.jsx(vn,{value:"security",children:"Security"}),r.jsx(vn,{value:"cleaning",children:"Cleaning"}),r.jsx(vn,{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx(Dn,{htmlFor:"priority",children:"Priority Level"}),r.jsxs(pn,{value:c.priority,onValueChange:e=>u("priority",e),children:[r.jsx(gn,{children:r.jsx(xn,{placeholder:"Select priority"})}),r.jsxs(bn,{children:[r.jsx(vn,{value:"low",children:"Low - Can wait a few days"}),r.jsx(vn,{value:"medium",children:"Medium - Should be fixed soon"}),r.jsx(vn,{value:"high",children:"High - Needs attention quickly"}),r.jsx(vn,{value:"urgent",children:"Urgent - Safety/security issue"})]})]})]}),r.jsxs("div",{children:[r.jsx(Dn,{htmlFor:"location",children:"Location in Unit"}),r.jsx(ln,{id:"location",value:c.location,onChange:e=>u("location",e.target.value),placeholder:"e.g., Kitchen sink, Master bedroom, Living room"})]}),r.jsxs("div",{children:[r.jsx(Dn,{htmlFor:"description",children:"Detailed Description *"}),r.jsx(Un,{id:"description",value:c.description,onChange:e=>u("description",e.target.value),placeholder:"Please provide as much detail as possible about the issue, including when it started, what you've tried, and how it's affecting you...",rows:4,required:!0})]}),r.jsxs(Kn,{children:[r.jsx(on,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),r.jsx(on,{type:"submit",disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx(ma,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(va,{className:"h-4 w-4 mr-2"}),"Submit Request"]})})]})]})]})]})}function Qn(){var e,t,s,a,n;const{user:i,signOut:o}=Lr(),{profile:l,loading:c}=(()=>{const[e,t]=A.useState(null),[s,r]=A.useState(!0),[a,n]=A.useState(null);return A.useEffect(()=>{let e=!0;(async()=>{try{r(!0),n(null);const s=await sn();if(!s)return void(e&&(t(null),r(!1)));const a=await rn(s.id);e&&t(a)}catch(s){console.error("Error fetching profile:",s),e&&n(s.message)}finally{e&&r(!1)}})();const{data:{subscription:s}}=tn.auth.onAuthStateChange(async(s,r)=>{if("SIGNED_IN"===s&&(null==r?void 0:r.user)){const s=await rn(r.user.id);e&&t(s)}else"SIGNED_OUT"===s&&e&&t(null)});return()=>{e=!1,null==s||s.unsubscribe()}},[]),{profile:e,loading:s,error:a,updateProfile:async e=>{try{const s=await sn();if(!s)throw new Error("No authenticated user");const{data:r,error:a}=await tn.from("profiles").update(e).eq("id",s.id).select().single();if(a)throw a;return t(r),{data:r,error:null}}catch(s){return console.error("Error updating profile:",s),{data:null,error:s.message}}},refetch:()=>{fetchProfile()}}})(),{requests:d,groupedRequests:u,loading:h}=On("tenant"),[m,p]=A.useState("overview"),[x,g]=A.useState(null),[f,y]=A.useState(null),[b,v]=A.useState(!0);A.useEffect(()=>{(async()=>{var e;if(i)try{const{data:t,error:s}=await tn.from("properties").select("\n            *,\n            lease:leases(\n              id,\n              start_date,\n              end_date,\n              rent_amount,\n              security_deposit,\n              status\n            )\n          ").eq("tenant_id",i.id).single();s&&"PGRST116"!==s.code?console.error("Error fetching property:",s):t&&(g(t),y((null==(e=t.lease)?void 0:e[0])||null))}catch(t){console.error("Error fetching tenant data:",t)}finally{v(!1)}})()},[i]);return c||b?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsx(qn,{className:"h-8 w-64"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>r.jsx(qn,{className:"h-32"},t))})]})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b bg-card",children:r.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Resident Dashboard"}),r.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",(null==l?void 0:l.full_name)||(null==i?void 0:i.email)]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(on,{variant:"outline",size:"sm",children:[r.jsx(ka,{className:"h-4 w-4 mr-2"}),"Settings"]}),r.jsxs(on,{variant:"outline",size:"sm",onClick:async()=>{await o()},children:[r.jsx(pa,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),r.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"flex space-x-1 bg-muted p-1 rounded-lg w-fit",children:[{id:"overview",label:"Overview"},{id:"maintenance",label:"Maintenance"},{id:"payments",label:"Payments"},{id:"lease",label:"Lease Info"},{id:"messages",label:"Messages"}].map(e=>r.jsx("button",{onClick:()=>p(e.id),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+(m===e.id?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:e.label},e.id))}),"overview"===m&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Cn,{children:[r.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Tn,{className:"text-sm font-medium",children:"Current Rent"}),r.jsx(ta,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(An,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==(e=null==f?void 0:f.rent_amount)?void 0:e.toLocaleString())||"N/A"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:f?"Per month":"No active lease"})]})]}),r.jsxs(Cn,{children:[r.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Tn,{className:"text-sm font-medium",children:"Lease Status"}),r.jsx(oa,{className:"h-4 w-4 text-blue-600"})]}),r.jsxs(An,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.status)||"No Lease"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(null==f?void 0:f.end_date)?`Ends ${new Date(f.end_date).toLocaleDateString()}`:"No active lease"})]})]}),r.jsxs(Cn,{children:[r.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Tn,{className:"text-sm font-medium",children:"Maintenance"}),r.jsx(Ia,{className:"h-4 w-4 text-orange-600"})]}),r.jsxs(An,{children:[r.jsx("div",{className:"text-2xl font-bold",children:u.pending.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending requests"})]})]}),r.jsxs(Cn,{children:[r.jsxs(Pn,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Tn,{className:"text-sm font-medium",children:"Property"}),r.jsx(ua,{className:"h-4 w-4 text-purple-600"})]}),r.jsxs(An,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(null==x?void 0:x.unit_number)||"N/A"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Unit number"})]})]})]}),x&&r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsxs(Tn,{className:"flex items-center",children:[r.jsx(ua,{className:"h-5 w-5 mr-2"}),"Your Property"]})}),r.jsx(An,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Property Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Address:"})," ",x.address]}),x.unit_number&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Unit:"})," ",x.unit_number]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Bedrooms:"})," ",x.bedrooms||"N/A"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Bathrooms:"})," ",x.bathrooms||"N/A"]})]})]}),f&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Lease Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Start Date:"})," ",new Date(f.start_date).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"End Date:"})," ",new Date(f.end_date).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Monthly Rent:"})," $",null==(t=f.rent_amount)?void 0:t.toLocaleString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Security Deposit:"})," $",(null==(s=f.security_deposit)?void 0:s.toLocaleString())||"N/A"]})]})]})]})})]}),r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsxs(Tn,{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ia,{className:"h-5 w-5 mr-2"}),"Recent Maintenance Requests"]}),r.jsx(Yn,{})]})}),r.jsx(An,{children:h?r.jsx("div",{className:"space-y-3",children:[...Array(3)].map((e,t)=>r.jsx(qn,{className:"h-16"},t))}):d.length>0?r.jsx("div",{className:"space-y-3",children:d.slice(0,5).map(e=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:e.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),r.jsxs(Ka,{variant:"completed"===e.status?"default":"in_progress"===e.status?"secondary":"destructive",children:["pending"===e.status&&r.jsx(Xr,{className:"h-3 w-3 mr-1"}),"in_progress"===e.status&&r.jsx(Yr,{className:"h-3 w-3 mr-1"}),"completed"===e.status&&r.jsx(Qr,{className:"h-3 w-3 mr-1"}),e.status.replace("_"," ")]})]},e.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ia,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No maintenance requests"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Submit a maintenance request when you need repairs or assistance."}),r.jsx(Yn,{})]})})]})]}),"maintenance"===m&&r.jsxs(Cn,{children:[r.jsxs(Pn,{children:[r.jsxs(Tn,{className:"flex items-center justify-between",children:["Maintenance Requests",r.jsx(Yn,{})]}),r.jsx(En,{children:"Submit and track maintenance requests for your unit"})]}),r.jsx(An,{children:h?r.jsx("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>r.jsx(qn,{className:"h-24"},t))}):d.length>0?r.jsx("div",{className:"space-y-4",children:d.map(e=>r.jsx("div",{className:"p-4 border rounded-lg",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium",children:e.title}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Submitted ",new Date(e.created_at).toLocaleDateString()]}),e.priority&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Priority: ",e.priority]})]})]}),e.admin_notes&&r.jsxs("div",{className:"mt-3 p-2 bg-muted rounded text-sm",children:[r.jsx("p",{className:"font-medium",children:"Admin Notes:"}),r.jsx("p",{children:e.admin_notes})]})]}),r.jsxs(Ka,{variant:"completed"===e.status?"default":"in_progress"===e.status?"secondary":"destructive",children:["pending"===e.status&&r.jsx(Xr,{className:"h-3 w-3 mr-1"}),"in_progress"===e.status&&r.jsx(Yr,{className:"h-3 w-3 mr-1"}),"completed"===e.status&&r.jsx(Qr,{className:"h-3 w-3 mr-1"}),e.status.replace("_"," ")]})]})},e.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ia,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No maintenance requests"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Submit a maintenance request when you need repairs or assistance."}),r.jsx(Yn,{})]})})]}),"payments"===m&&r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsx(Tn,{children:"Payment History"})}),r.jsx(An,{children:r.jsx("p",{className:"text-muted-foreground",children:"Payment history and rent payment features coming soon..."})})]}),"lease"===m&&r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsx(Tn,{children:"Lease Information"})}),r.jsx(An,{children:f?r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-3",children:"Lease Details"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Start Date:"})," ",new Date(f.start_date).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"End Date:"})," ",new Date(f.end_date).toLocaleDateString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Status:"})," ",f.status]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-3",children:"Financial Details"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Monthly Rent:"})," $",null==(a=f.rent_amount)?void 0:a.toLocaleString()]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Security Deposit:"})," $",(null==(n=f.security_deposit)?void 0:n.toLocaleString())||"N/A"]})]})]})]})}):r.jsx("p",{className:"text-muted-foreground",children:"No active lease information available."})})]}),"messages"===m&&r.jsxs(Cn,{children:[r.jsx(Pn,{children:r.jsx(Tn,{children:"Messages"})}),r.jsx(An,{children:r.jsx("p",{className:"text-muted-foreground",children:"Messaging features coming soon..."})})]})]})]})}function Zn(){const e=q(),{user:t}=Lr();return A.useEffect(()=>{(async()=>{var t;try{const{data:s,error:r}=await Pr.auth.getSession();if(r)return console.error("Auth callback error:",r),void e("/login?error=auth_callback_failed");if(null==(t=s.session)?void 0:t.user){const t=Tr(s.session.user);e("admin"===t||"landlord"===t?"/admin/dashboard":"/resident/dashboard")}else e("/login")}catch(s){console.error("Auth callback error:",s),e("/login?error=auth_callback_failed")}})()},[e]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-muted-foreground",children:"Completing sign in..."})]})})}function Xn(){const[e,t]=R.useState("en");return R.useEffect(()=>{const e=()=>{t(Fa())};e();const s=t=>{"preferred-language"===t.key&&e()};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("section",{className:"py-20 px-4",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:za("about.title",e)}),r.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:za("about.subtitle",e)})]})}),r.jsx("section",{className:"py-16 px-4 bg-muted/50",children:r.jsx("div",{className:"container mx-auto max-w-4xl",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:za("about.mission.title",e)}),r.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:za("about.mission.description",e)}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ca,{className:"h-6 w-6 text-primary"}),r.jsx("span",{children:za("about.mission.global",e)})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(_a,{className:"h-6 w-6 text-primary"}),r.jsx("span",{children:za("about.mission.secure",e)})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(da,{className:"h-6 w-6 text-primary"}),r.jsx("span",{children:za("about.mission.simple",e)})]})]})]}),r.jsxs("div",{className:"bg-primary/10 rounded-lg p-8",children:[r.jsx(Gr,{className:"h-16 w-16 text-primary mb-4"}),r.jsx("h3",{className:"text-2xl font-bold mb-4",children:za("about.stats.title",e)}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-primary",children:"10,000+"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:za("about.stats.properties",e)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-primary",children:"50+"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:za("about.stats.countries",e)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-primary",children:"25,000+"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:za("about.stats.users",e)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-3xl font-bold text-primary",children:"99.9%"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:za("about.stats.uptime",e)})]})]})]})]})})}),r.jsx("section",{className:"py-16 px-4",children:r.jsxs("div",{className:"container mx-auto max-w-6xl",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:za("about.values.title",e)}),r.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:za("about.values.subtitle",e)})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:r.jsx(ca,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-xl font-bold mb-3",children:za("about.values.global.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:za("about.values.global.description",e)})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:r.jsx(_a,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-xl font-bold mb-3",children:za("about.values.security.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:za("about.values.security.description",e)})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-primary/10 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:r.jsx(Ea,{className:"h-8 w-8 text-primary"})}),r.jsx("h3",{className:"text-xl font-bold mb-3",children:za("about.values.community.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:za("about.values.community.description",e)})]})]})]})}),r.jsx("section",{className:"py-16 px-4 bg-muted/50",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:za("about.team.title",e)}),r.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:za("about.team.description",e)}),r.jsxs("div",{className:"bg-primary/10 rounded-lg p-8",children:[r.jsx(zr,{className:"h-12 w-12 text-primary mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold mb-4",children:za("about.team.commitment.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:za("about.team.commitment.description",e)})]})]})}),r.jsx("section",{className:"py-16 px-4",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:za("about.contact.title",e)}),r.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:za("about.contact.description",e)}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("a",{href:"/contact",className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8 py-3 rounded-md font-medium transition-colors",children:za("about.contact.button",e)}),r.jsx("a",{href:"/signup",className:"border border-primary text-primary hover:bg-primary hover:text-primary-foreground px-8 py-3 rounded-md font-medium transition-colors",children:za("about.contact.trial",e)})]})]})})]})}function ei(){const[e,t]=A.useState("en"),[s,a]=A.useState({name:"",email:"",subject:"",message:""}),[n,i]=A.useState(!1),[o,l]=A.useState(!1);R.useEffect(()=>{const e=()=>{t(Fa())};e();const s=t=>{"preferred-language"===t.key&&e()};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]);const c=(e,t)=>{a(s=>({...s,[e]:t}))};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("section",{className:"py-20 px-4",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:za("contact.title",e)}),r.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:za("contact.subtitle",e)})]})}),r.jsx("section",{className:"py-16 px-4",children:r.jsx("div",{className:"container mx-auto max-w-6xl",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold mb-8",children:za("contact.info.title",e)}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:r.jsx(xa,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-1",children:za("contact.info.email.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:"support@rentcontrol.net"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:za("contact.info.email.description",e)})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:r.jsx(ba,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-1",children:za("contact.info.phone.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:"+1 (920) 123-4567"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:za("contact.info.phone.description",e)})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:r.jsx(ga,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-1",children:za("contact.info.address.title",e)}),r.jsxs("p",{className:"text-muted-foreground",children:["Appleton, WI",r.jsx("br",{}),"United States"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"bg-primary/10 rounded-lg p-3",children:r.jsx(Xr,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-1",children:za("contact.info.hours.title",e)}),r.jsxs("p",{className:"text-muted-foreground",children:[za("contact.info.hours.weekdays",e),r.jsx("br",{}),za("contact.info.hours.weekend",e)]})]})]})]}),r.jsxs("div",{className:"mt-12 p-6 bg-muted/50 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-4",children:za("contact.support.title",e)}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("a",{href:"/blog",className:"block text-primary hover:underline",children:["📚 ",za("contact.support.help",e)]}),r.jsxs("a",{href:"/faq",className:"block text-primary hover:underline",children:["❓ ",za("contact.support.faq",e)]}),r.jsxs("a",{href:"mailto:support@rentcontrol.net",className:"block text-primary hover:underline",children:["💬 ",za("contact.support.email",e)]})]})]})]}),r.jsx("div",{children:r.jsxs("div",{className:"bg-card border rounded-lg p-8",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:za("contact.form.title",e)}),o?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:r.jsx(Qr,{className:"h-8 w-8 text-green-600"})}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:za("contact.form.success.title",e)}),r.jsx("p",{className:"text-muted-foreground",children:za("contact.form.success.message",e)})]}):r.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),await new Promise(e=>setTimeout(e,2e3)),i(!1),l(!0),setTimeout(()=>{a({name:"",email:"",subject:"",message:""}),l(!1)},3e3)},className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:za("contact.form.name",e)}),r.jsx("input",{type:"text",value:s.name,onChange:e=>c("name",e.target.value),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:za("contact.form.email",e)}),r.jsx("input",{type:"email",value:s.email,onChange:e=>c("email",e.target.value),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:n})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:za("contact.form.subject",e)}),r.jsxs("select",{value:s.subject,onChange:e=>c("subject",e.target.value),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:n,children:[r.jsx("option",{value:"",children:za("contact.form.subject.placeholder",e)}),r.jsx("option",{value:"general",children:za("contact.form.subject.general",e)}),r.jsx("option",{value:"support",children:za("contact.form.subject.support",e)}),r.jsx("option",{value:"billing",children:za("contact.form.subject.billing",e)}),r.jsx("option",{value:"feature",children:za("contact.form.subject.feature",e)}),r.jsx("option",{value:"partnership",children:za("contact.form.subject.partnership",e)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:za("contact.form.message",e)}),r.jsx("textarea",{value:s.message,onChange:e=>c("message",e.target.value),rows:6,className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:za("contact.form.message.placeholder",e),required:!0,disabled:n})]}),r.jsx("button",{type:"submit",disabled:n,className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 px-6 py-3 rounded-md font-medium transition-colors flex items-center justify-center space-x-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:za("contact.form.sending",e)})]}):r.jsxs(r.Fragment,{children:[r.jsx(Na,{className:"h-4 w-4"}),r.jsx("span",{children:za("contact.form.send",e)})]})})]})]})})]})})})]})}function ti(){const[e,t]=A.useState("en"),[s,a]=A.useState(""),[n,i]=A.useState(new Set([0]));R.useEffect(()=>{const e=()=>{t(Fa())};e();const s=t=>{"preferred-language"===t.key&&e()};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]);const o=[{category:"Getting Started",questions:[{question:"How do I get started with Rent Control Manager?",answer:"Getting started is easy! Simply sign up for a free account, add your first property, and invite your tenants. Our setup wizard will guide you through each step."},{question:"Is there a free trial available?",answer:"Yes! We offer a 14-day free trial with full access to all features. No credit card required to start."},{question:"How long does it take to set up my properties?",answer:"Most property managers can add their first property in under 5 minutes. Our intuitive interface makes it quick and easy."}]},{category:"Pricing & Plans",questions:[{question:"What are your pricing plans?",answer:"We offer four plans: Free (with ads, 1 unit max), Starter ($49.99/month for up to 5 units), Professional ($129.99/month for up to 15 units), and Enterprise (custom pricing for unlimited units)."},{question:"Can I change my plan anytime?",answer:"Absolutely! You can upgrade or downgrade your plan at any time. Changes take effect immediately, and billing is prorated."},{question:"Are there any setup fees?",answer:"No setup fees, ever. You only pay for your monthly subscription, and you can cancel anytime."}]},{category:"Features & Functionality",questions:[{question:"Can I manage properties in multiple countries?",answer:"Yes! Rent Control Manager supports global property management with multi-currency support, local compliance features, and region-specific payment methods."},{question:"How does the tenant portal work?",answer:"Tenants receive an invitation email to create their account. They can then pay rent, submit maintenance requests, view lease documents, and communicate with you through their portal."},{question:"Is there a mobile app?",answer:"Yes! We have mobile-optimized web apps for both iOS and Android. You can manage your properties on the go with full functionality."},{question:"How secure is my data?",answer:"We use bank-level security with 256-bit SSL encryption, regular security audits, and GDPR compliance. Your data is backed up daily and stored securely."}]},{category:"Payment & Billing",questions:[{question:"How do tenants pay rent?",answer:"Tenants can pay rent online through their portal using bank transfers, credit cards, or local payment methods. Payments are processed securely and you receive instant notifications."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards, bank transfers, and local payment methods in 150+ countries. Payment processing fees vary by region."},{question:"When do I get paid?",answer:"Rent payments are typically deposited into your account within 1-3 business days, depending on your location and payment method."}]},{category:"Support & Help",questions:[{question:"What support options are available?",answer:"We offer email support for all plans, priority support for Professional plans, and 24/7 phone support for Enterprise customers. We also have a comprehensive help center."},{question:"How can I contact support?",answer:"You can reach us at support@rentcontrol.net, call +1 (920) 123-4567, or use the chat widget in your dashboard. Our team is here to help!"},{question:"Do you offer training or onboarding?",answer:"Yes! We provide free onboarding for all new customers, video tutorials, and custom training sessions for Enterprise clients."}]}].map(e=>({...e,questions:e.questions.filter(e=>e.question.toLowerCase().includes(s.toLowerCase())||e.answer.toLowerCase().includes(s.toLowerCase()))})).filter(e=>e.questions.length>0);return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("section",{className:"py-20 px-4",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx(Zr,{className:"h-16 w-16 text-primary mx-auto mb-6"}),r.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:za("faq.title",e)}),r.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:za("faq.subtitle",e)}),r.jsxs("div",{className:"relative max-w-md mx-auto",children:[r.jsx(wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx("input",{type:"text",placeholder:za("faq.search.placeholder",e),value:s,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]})}),r.jsx("section",{className:"py-16 px-4",children:r.jsx("div",{className:"container mx-auto max-w-4xl",children:0===o.length?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:za("faq.search.no_results",e)}),r.jsx("button",{onClick:()=>a(""),className:"text-primary hover:underline",children:za("faq.search.clear",e)})]}):r.jsx("div",{className:"space-y-8",children:o.map((e,t)=>r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary",children:e.category}),r.jsx("div",{className:"space-y-4",children:e.questions.map((e,s)=>{const a=100*t+s,o=n.has(a);return r.jsxs("div",{className:"border border-border rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>(e=>{const t=new Set(n);t.has(e)?t.delete(e):t.add(e),i(t)})(a),className:"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-muted/50 transition-colors",children:[r.jsx("span",{className:"font-medium pr-4",children:e.question}),o?r.jsx(Jr,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}):r.jsx(Vr,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"})]}),o&&r.jsx("div",{className:"px-6 pb-4",children:r.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.answer})})]},a)})})]},t))})})}),r.jsx("section",{className:"py-16 px-4 bg-muted/50",children:r.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:za("faq.contact.title",e)}),r.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:za("faq.contact.description",e)}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("a",{href:"/contact",className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8 py-3 rounded-md font-medium transition-colors",children:za("faq.contact.button",e)}),r.jsx("a",{href:"mailto:support@rentcontrol.net",className:"border border-primary text-primary hover:bg-primary hover:text-primary-foreground px-8 py-3 rounded-md font-medium transition-colors",children:za("faq.contact.email",e)})]})]})})]})}function si(){var e;const[t,s]=A.useState(""),[a,n]=A.useState("all"),i=[{id:"all",name:"All Articles",count:24},{id:"getting-started",name:"Getting Started",count:8},{id:"property-management",name:"Property Management",count:6},{id:"tenant-relations",name:"Tenant Relations",count:5},{id:"financial-management",name:"Financial Management",count:3},{id:"legal-compliance",name:"Legal & Compliance",count:2}],o=[{id:1,title:"Complete Guide to Setting Up Your First Property",excerpt:"Learn how to add your first property to Rent Control and configure all the essential settings for successful property management.",category:"getting-started",readTime:"8 min read",author:"Sarah Johnson",date:"2024-01-15",featured:!0,type:"guide"},{id:2,title:"How to Invite and Manage Tenants Effectively",excerpt:"Step-by-step instructions on inviting tenants, setting up their profiles, and managing tenant relationships through the platform.",category:"tenant-relations",readTime:"6 min read",author:"Michael Chen",date:"2024-01-12",featured:!0,type:"tutorial"},{id:3,title:"Understanding Global Payment Processing",excerpt:"Everything you need to know about accepting rent payments in multiple currencies and managing international transactions.",category:"financial-management",readTime:"10 min read",author:"Emma Rodriguez",date:"2024-01-10",featured:!0,type:"guide"}],l=[...o,{id:4,title:"Setting Up Automated Rent Collection",excerpt:"Configure automatic rent collection to streamline your cash flow and reduce late payments.",category:"financial-management",readTime:"5 min read",author:"David Park",date:"2024-01-08",type:"tutorial"},{id:5,title:"Managing Maintenance Requests Efficiently",excerpt:"Best practices for handling tenant maintenance requests and coordinating with service providers.",category:"property-management",readTime:"7 min read",author:"Lisa Thompson",date:"2024-01-05",type:"guide"},{id:6,title:"Legal Compliance for Multi-Country Operations",excerpt:"Navigate the legal requirements when managing properties across different countries and jurisdictions.",category:"legal-compliance",readTime:"12 min read",author:"Robert Kim",date:"2024-01-03",type:"guide"},{id:7,title:"Optimizing Your Property Listings",excerpt:"Tips and tricks to make your property listings more attractive to potential tenants.",category:"property-management",readTime:"4 min read",author:"Anna Wilson",date:"2024-01-01",type:"tips"},{id:8,title:"Using Analytics to Improve Performance",excerpt:"Leverage the built-in analytics dashboard to make data-driven decisions about your properties.",category:"property-management",readTime:"9 min read",author:"James Miller",date:"2023-12-28",type:"tutorial"}].filter(e=>{const s=e.title.toLowerCase().includes(t.toLowerCase())||e.excerpt.toLowerCase().includes(t.toLowerCase()),r="all"===a||e.category===a;return s&&r}),c=e=>{switch(e){case"guide":return r.jsx(Wr,{className:"h-4 w-4"});case"tutorial":return r.jsx(Aa,{className:"h-4 w-4"});case"tips":return r.jsx(Zr,{className:"h-4 w-4"});default:return r.jsx(oa,{className:"h-4 w-4"})}},d=e=>{switch(e){case"guide":return"bg-blue-100 text-blue-800";case"tutorial":return"bg-green-100 text-green-800";case"tips":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:r.jsx("div",{className:"container mx-auto px-4 py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Help Center & Guides"}),r.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Everything you need to know about managing properties with Rent Control. From getting started to advanced features."}),r.jsxs("div",{className:"max-w-md mx-auto relative",children:[r.jsx(wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),r.jsx(ln,{type:"text",placeholder:"Search articles...",value:t,onChange:e=>s(e.target.value),className:"pl-10 bg-white/10 border-white/20 text-white placeholder-blue-200"})]})]})})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx("div",{className:"lg:w-1/4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-6",children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Categories"}),r.jsx("div",{className:"space-y-2",children:i.map(e=>r.jsx("button",{onClick:()=>n(e.id),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors "+(a===e.id?"bg-blue-100 text-blue-800 font-medium":"hover:bg-gray-100 text-gray-700"),children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:e.name}),r.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded-full",children:e.count})]})},e.id))}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Quick Links"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(O,{to:"/contact",className:"flex items-center text-sm text-gray-600 hover:text-blue-600",children:[r.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Contact Support"]}),r.jsxs(O,{to:"/signup",className:"flex items-center text-sm text-gray-600 hover:text-blue-600",children:[r.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Get Started"]}),r.jsxs("a",{href:"#",className:"flex items-center text-sm text-gray-600 hover:text-blue-600",children:[r.jsx(sa,{className:"h-4 w-4 mr-2"}),"Download Resources"]})]})]})]})}),r.jsxs("div",{className:"lg:w-3/4",children:["all"===a&&r.jsxs("div",{className:"mb-12",children:[r.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Featured Articles"}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(e=>{var t;return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${d(e.type)}`,children:[c(e.type),e.type]}),r.jsx("span",{className:"text-xs text-gray-500 capitalize",children:null==(t=i.find(t=>t.id===e.category))?void 0:t.name})]}),r.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2",children:e.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.excerpt}),r.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ta,{className:"h-3 w-3"}),e.author]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"h-3 w-3"}),e.readTime]})]})}),r.jsxs(on,{variant:"outline",size:"sm",className:"w-full",children:["Read More",r.jsx(Fr,{className:"h-4 w-4 ml-2"})]})]})},e.id)})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"all"===a?"All Articles":null==(e=i.find(e=>e.id===a))?void 0:e.name}),r.jsxs("span",{className:"text-sm text-gray-500",children:[l.length," articles found"]})]}),r.jsx("div",{className:"space-y-6",children:l.map(e=>{var t;return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${d(e.type)}`,children:[c(e.type),e.type]}),r.jsx("span",{className:"text-xs text-gray-500 capitalize",children:null==(t=i.find(t=>t.id===e.category))?void 0:t.name})]}),r.jsx("h3",{className:"font-semibold text-xl mb-2",children:e.title}),r.jsx("p",{className:"text-gray-600 mb-3",children:e.excerpt}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ta,{className:"h-3 w-3"}),e.author]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"h-3 w-3"}),e.readTime]}),r.jsx("span",{children:new Date(e.date).toLocaleDateString()})]})]}),r.jsx("div",{className:"md:ml-6",children:r.jsxs(on,{variant:"outline",children:["Read More",r.jsx(Fr,{className:"h-4 w-4 ml-2"})]})})]})},e.id)})}),0===l.length&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(wa,{className:"h-12 w-12 mx-auto"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No articles found"}),r.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms or selecting a different category."})]})]})]})]})}),r.jsx("div",{className:"bg-gray-50 py-16",children:r.jsxs("div",{className:"container mx-auto px-4 text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Still need help?"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Can't find what you're looking for? Our support team is here to help you get the most out of Rent Control."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(on,{asChild:!0,children:r.jsx(O,{to:"/contact",children:"Contact Support"})}),r.jsx(on,{variant:"outline",asChild:!0,children:r.jsx(O,{to:"/signup",children:"Start Free Trial"})})]})]})})]})}Jn.displayName=_.displayName;const ri={free:{id:"free",name:"Free",price:0,interval:"month",lookupKey:null,features:["Up to 1 property unit","Basic tenant management","Payment tracking","Email support","Mobile app access","Includes ads"],limits:{properties:1,unitsPerProperty:5,admins:1,ads:!0,support:"email"},popular:!1,cta:"Start Free"},starter:{id:"starter",name:"Starter",price:49.99,interval:"month",lookupKey:"plan_starter_monthly_v1",yearlyLookupKey:"plan_starter_yearly_v1",features:["Up to 5 property units","Advanced tenant portal","Automated rent collection","Maintenance management","Financial reporting","Priority support","No ads"],limits:{properties:5,unitsPerProperty:20,admins:2,ads:!1,support:"priority"},popular:!0,cta:"Start Free Trial"},pro:{id:"pro",name:"Professional",price:129.99,interval:"month",lookupKey:"plan_pro_monthly_v1",yearlyLookupKey:"plan_pro_yearly_v1",features:["Unlimited property units","Advanced analytics","Multi-language support","Custom branding","API access","Dedicated support","Advanced integrations"],limits:{properties:"unlimited",unitsPerProperty:"unlimited",admins:"unlimited",ads:!1,support:"sla",analytics:"advanced"},popular:!1,cta:"Start Free Trial"},enterprise:{id:"enterprise",name:"Enterprise",price:"Custom",interval:"month",lookupKey:null,features:["Unlimited property units","White-label solution","Custom integrations","Dedicated account manager","Advanced analytics","24/7 phone support","Custom training"],limits:{properties:"unlimited",unitsPerProperty:"unlimited",admins:"unlimited",ads:!1,support:"dedicated",analytics:"enterprise"},popular:!1,cta:"Contact Sales"}};var ai,ni="https://js.stripe.com/v3",ii=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,oi=function(e){var t=document.createElement("script");t.src="".concat(ni).concat("");var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(t),t},li=null,ci=null,di=null,ui=function(e){return null!==li?li:(li=new Promise(function(t,s){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ni,'"]')),t=0;t<e.length;t++){var s=e[t];if(ii.test(s.src))return s}return null}();if(r&&e);else if(r){if(r&&null!==di&&null!==ci){var a;r.removeEventListener("load",di),r.removeEventListener("error",ci),null===(a=r.parentNode)||void 0===a||a.removeChild(r),r=oi()}}else r=oi();di=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,s),ci=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(s),r.addEventListener("load",di),r.addEventListener("error",ci)}catch(n){return void s(n)}else t(null)})).catch(function(e){return li=null,Promise.reject(e)})},hi=!1,mi=function(){return ai||(ai=ui(null).catch(function(e){return ai=null,Promise.reject(e)}))};Promise.resolve().then(function(){return mi()}).catch(function(e){hi||console.warn(e)});!function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];hi=!0;var r=Date.now();mi().then(function(e){return function(e,t,s){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"4.6.0",startTime:t})}(r,s),r}(e,t,r)})}("pk_test_mock");const pi=async(e,t)=>{try{const e=await(async()=>{await new Promise(e=>setTimeout(e,1e3));const e="cs_test_"+Math.random().toString(36).substr(2,9);return`${window.location.origin}/billing/success?session_id=${e}`})();window.location.href=e}catch(s){throw console.error("Error with mock checkout:",s),s}},xi=()=>{const e=q(),{user:t}=Lr(),[s,a]=A.useState(null),[n,i]=A.useState("monthly"),o=e=>{if("Custom"===e.price)return"Custom";if(0===e.price)return"Free";return`$${"yearly"===n?10*e.price:e.price}`};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Select the perfect plan for your property management needs"}),r.jsx("div",{className:"flex items-center justify-center mb-8",children:r.jsxs("div",{className:"bg-white rounded-lg p-1 shadow-sm border",children:[r.jsx("button",{onClick:()=>i("monthly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("monthly"===n?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:"Monthly"}),r.jsxs("button",{onClick:()=>i("yearly"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("yearly"===n?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-900"),children:["Yearly",r.jsx("span",{className:"ml-1 text-xs bg-green-100 text-green-800 px-1 rounded",children:"Save 20%"})]})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Object.values(ri).map(i=>r.jsxs("div",{className:"relative bg-white rounded-2xl shadow-lg border-2 transition-all duration-300 hover:shadow-xl "+(i.popular?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300"),children:[i.popular&&r.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:r.jsxs("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center",children:[r.jsx(Sa,{className:"w-4 h-4 mr-1"}),"Most Popular"]})}),r.jsxs("div",{className:"p-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:i.name}),r.jsxs("div",{className:"text-4xl font-bold text-gray-900 mb-1",children:[o(i),"Custom"!==i.price&&0!==i.price&&r.jsxs("span",{className:"text-lg font-normal text-gray-600",children:["/","yearly"===n?"year":"month"]})]}),"yearly"===n&&"Custom"!==i.price&&0!==i.price&&r.jsx("p",{className:"text-sm text-green-600",children:"2 months free with yearly billing"})]}),r.jsx("ul",{className:"space-y-3 mb-8",children:i.features.map((e,t)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx(Kr,{className:"w-5 h-5 text-green-500 mr-3 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-gray-700",children:e})]},t))}),r.jsx("button",{onClick:()=>(async s=>{if("free"!==s.id)if("enterprise"!==s.id){a(s.id);try{"yearly"===n?s.yearlyLookupKey:s.lookupKey,null==t||t.email,await pi()}catch(r){console.error("Error processing plan selection:",r),a(null)}}else e("/contact");else e("/admin/dashboard")})(i),disabled:s===i.id,className:`w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 ${i.popular?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-900 hover:bg-gray-800 text-white"} ${s===i.id?"opacity-50 cursor-not-allowed":"hover:shadow-lg"}`,children:s===i.id?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):i.cta}),"free"!==i.id&&"enterprise"!==i.id&&r.jsx("p",{className:"text-center text-sm text-gray-500 mt-3",children:"14-day free trial • No credit card required"})]})]},i.id))}),r.jsxs("div",{className:"text-center mt-12",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-8 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(qa,{className:"w-4 h-4 mr-2 text-green-500"}),"14-day free trial"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Kr,{className:"w-4 h-4 mr-2 text-green-500"}),"No setup fees"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Kr,{className:"w-4 h-4 mr-2 text-green-500"}),"Cancel anytime"]})]}),r.jsxs("p",{className:"text-gray-500 mt-4",children:["Need help choosing? ",r.jsx("a",{href:"/contact",className:"text-blue-600 hover:underline",children:"Contact our sales team"})]})]})]})})},gi=()=>{const[e]=M(),t=q(),{user:s}=Lr(),[a,n]=A.useState(!0),[i,o]=A.useState(null),l=e.get("plan"),c=e.get("interval")||"monthly",d=ri[l];if(A.useEffect(()=>{if(!d||!s)return void t("/choose-plan");const e=setTimeout(async()=>{try{n(!0);const e="yearly"===c?d.yearlyLookupKey:d.lookupKey;if(!e)throw new Error("Invalid plan configuration");await pi(0,s.email)}catch(e){console.error("Checkout error:",e),o(e.message),n(!1)}},1500);return()=>clearTimeout(e)},[d,s,c,t]),!d)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Plan Not Found"}),r.jsx("button",{onClick:()=>t("/choose-plan"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Choose a Plan"})]})});return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-md mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("button",{onClick:()=>t("/choose-plan"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(Br,{className:"w-4 h-4 mr-2"}),"Back to Plans"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Purchase"}),r.jsxs("p",{className:"text-gray-600",children:["You're subscribing to the ",d.name," plan"]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.name}),r.jsxs("p",{className:"text-gray-600 capitalize",children:[c," billing"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(()=>{if("Custom"===d.price)return"Custom";if(0===d.price)return"Free";return`$${"yearly"===c?10*d.price:d.price}`})(),"Custom"!==d.price&&0!==d.price&&r.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["/","yearly"===c?"year":"month"]})]}),"yearly"===c&&"Custom"!==d.price&&0!==d.price&&r.jsx("p",{className:"text-sm text-green-600",children:"Save 20% with yearly billing"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's included:"}),r.jsxs("ul",{className:"space-y-1",children:[d.features.slice(0,3).map((e,t)=>r.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full mr-2"}),e]},t)),d.features.length>3&&r.jsxs("li",{className:"text-sm text-gray-500",children:["+",d.features.length-3," more features"]})]})]})]}),a&&r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[r.jsx(ma,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Redirecting to Secure Checkout"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Please wait while we prepare your payment..."}),r.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(_a,{className:"w-4 h-4 mr-1"}),"SSL Secured"]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ea,{className:"w-4 h-4 mr-1"}),"Stripe Powered"]})]})]}),i&&r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-gray-600 mb-4",children:i}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700",children:"Try Again"}),r.jsx("button",{onClick:()=>t("/choose-plan"),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300",children:"Back to Plans"})]})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Your payment is processed securely by Stripe. We never store your payment information."})})]})})},fi=()=>{const[e]=M(),t=q(),{user:s}=Lr(),[a]=A.useState(e.get("session_id")),[n,i]=A.useState(10);A.useEffect(()=>{const e=setInterval(()=>{i(e=>e<=1?(t("/admin/dashboard"),0):e-1)},1e3);return()=>clearInterval(e)},[t]);const o=()=>{t("/admin/dashboard")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6",children:r.jsx(Qr,{className:"w-12 h-12 text-green-600"})}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),r.jsx("p",{className:"text-xl text-gray-600",children:"Welcome to your upgraded Rent Control experience"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Your subscription is now active"}),r.jsx("p",{className:"text-gray-600",children:"You now have access to all premium features and increased limits"})]}),a&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Transaction ID"}),r.jsx("p",{className:"text-sm text-gray-600 font-mono",children:a})]}),r.jsxs("button",{onClick:()=>{alert("Receipt download would be implemented with Stripe API")},className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[r.jsx(sa,{className:"w-4 h-4 mr-1"}),"Receipt"]})]})}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"What's next?"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:r.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Access your dashboard"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Start managing your properties with enhanced features"})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:r.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Explore new features"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Check out advanced analytics, automation tools, and more"})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:r.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Manage your subscription"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Update billing details or change plans anytime in settings"})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("button",{onClick:o,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center",children:["Continue to Dashboard",r.jsx(Fr,{className:"w-5 h-5 ml-2"})]}),r.jsxs("button",{onClick:()=>t("/billing"),className:"flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-200 transition-colors flex items-center justify-center",children:[r.jsx(ea,{className:"w-5 h-5 mr-2"}),"Billing Settings"]})]})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Automatically redirecting to your dashboard in ",n," seconds..."]}),r.jsx("button",{onClick:o,className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2",children:"Skip waiting"})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Need help getting started?"," ",r.jsx("a",{href:"/contact",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Contact our support team"})]})})]})})},yi=()=>{var e,t,s,a;const n=q(),{user:i}=Lr(),[o,l]=A.useState("free"),[c,d]=A.useState(null),[u,h]=A.useState(!0);A.useEffect(()=>{(async()=>{h(!0),await new Promise(e=>setTimeout(e,1e3));const e={plan:"starter",status:"active",currentPeriodEnd:new Date(Date.now()+2592e6),cancelAtPeriodEnd:!1,paymentMethod:{type:"card",last4:"4242",brand:"visa",expiryMonth:12,expiryYear:2025},nextInvoice:{amount:49.99,date:new Date(Date.now()+2592e6)}};l(e.plan),d(e),h(!1)})()},[]);const m=()=>{n("/choose-plan")},p=()=>{alert("This would open the Stripe Customer Portal for payment method management")},x=ri[o]||ri.free;return u?r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-48 bg-gray-200 rounded"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>n("/admin/dashboard"),className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(Br,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),r.jsx("p",{className:"text-gray-600",children:"Manage your subscription, payment methods, and billing history"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Current Plan"}),r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("active"===(null==c?void 0:c.status)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"active"===(null==c?void 0:c.status)?"Active":"Inactive"})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:x.name}),r.jsxs("p",{className:"text-gray-600",children:["$",x.price,"/month • Renews ",null==(e=null==c?void 0:c.currentPeriodEnd)?void 0:e.toLocaleDateString()]})]}),r.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Change Plan"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Plan Limits"}),r.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("li",{children:["Properties: ","unlimited"===x.limits.properties?"Unlimited":x.limits.properties]}),r.jsxs("li",{children:["Units per property: ","unlimited"===x.limits.unitsPerProperty?"Unlimited":x.limits.unitsPerProperty]}),r.jsxs("li",{children:["Admin users: ","unlimited"===x.limits.admins?"Unlimited":x.limits.admins]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Features"}),r.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-center",children:[r.jsx(Qr,{className:"w-4 h-4 text-green-500 mr-2"}),x.limits.ads?"Includes ads":"No ads"]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(Qr,{className:"w-4 h-4 text-green-500 mr-2"}),x.limits.support," support"]}),x.limits.analytics&&r.jsxs("li",{className:"flex items-center",children:[r.jsx(Qr,{className:"w-4 h-4 text-green-500 mr-2"}),x.limits.analytics," analytics"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Method"}),r.jsxs("button",{onClick:p,className:"text-blue-600 hover:text-blue-700 font-medium flex items-center",children:[r.jsx(ka,{className:"w-4 h-4 mr-1"}),"Manage"]})]}),(null==c?void 0:c.paymentMethod)?r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-12 h-8 bg-gray-100 rounded flex items-center justify-center mr-4",children:r.jsx(ea,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:["•••• •••• •••• ",c.paymentMethod.last4]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[c.paymentMethod.brand.toUpperCase()," • Expires ",c.paymentMethod.expiryMonth,"/",c.paymentMethod.expiryYear]})]})]}):r.jsxs("div",{className:"text-center py-4",children:[r.jsx(Yr,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:"No payment method on file"}),r.jsx("button",{className:"text-blue-600 hover:text-blue-700 font-medium mt-2",children:"Add payment method"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Billing History"}),r.jsxs("button",{onClick:()=>{alert("This would download the latest invoice from Stripe")},className:"text-blue-600 hover:text-blue-700 font-medium flex items-center",children:[r.jsx(sa,{className:"w-4 h-4 mr-1"}),"Download Latest"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"December 2024"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Starter Plan • Paid"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"$49.99"}),r.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm",children:"Download"})]})]}),r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"November 2024"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Starter Plan • Paid"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"font-medium text-gray-900",children:"$49.99"}),r.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm",children:"Download"})]})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Next Invoice"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Amount"}),r.jsxs("span",{className:"font-medium text-gray-900",children:["$",null==(t=null==c?void 0:c.nextInvoice)?void 0:t.amount]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Date"}),r.jsx("span",{className:"font-medium text-gray-900",children:null==(a=null==(s=null==c?void 0:c.nextInvoice)?void 0:s.date)?void 0:a.toLocaleDateString()})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(Hr,{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Auto-renewal enabled"}),r.jsx("p",{className:"text-xs text-blue-700",children:"Your subscription will automatically renew"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:m,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Upgrade Plan"}),r.jsx(aa,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Get more features and higher limits"})]}),r.jsxs("button",{onClick:p,className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:"Update Payment"}),r.jsx(aa,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Change your payment method"})]}),r.jsxs("button",{onClick:()=>{confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.")&&alert("Subscription cancellation would be processed via Stripe API")},className:"w-full text-left p-3 rounded-lg border border-red-200 hover:border-red-300 hover:bg-red-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-red-900",children:"Cancel Subscription"}),r.jsx(Yr,{className:"w-4 h-4 text-red-400"})]}),r.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Cancel at the end of billing period"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Need Help?"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Have questions about your billing or subscription? Our support team is here to help."}),r.jsx("button",{onClick:()=>n("/contact"),className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"Contact Support"})]})]})]})]})})};function bi(){var e,t;const[s]=M(),[a,n]=A.useState(null),[i,o]=A.useState(!0),l=s.get("session_id");A.useEffect(()=>{l&&c()},[l]);const c=async()=>{try{const e=await fetch(`undefined/api/payments/session/${l}`),t=await e.json();t.session&&n(t.session)}catch(e){console.error("Error fetching session data:",e)}finally{o(!1)}};return i?r.jsx("div",{className:"min-h-screen pt-16 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Processing your payment..."})]})}):r.jsx("div",{className:"min-h-screen pt-16 bg-gray-50",children:r.jsx("div",{className:"container mx-auto px-4 py-16",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(Qr,{className:"w-8 h-8 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-2",children:"Payment Successful!"}),r.jsx("p",{className:"text-muted-foreground",children:"Thank you for your subscription to Rent Control"})]}),a&&r.jsxs(Cn,{className:"mb-8",children:[r.jsx(Pn,{children:r.jsxs(Tn,{className:"flex items-center",children:[r.jsx(ea,{className:"w-5 h-5 mr-2"}),"Payment Details"]})}),r.jsxs(An,{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),r.jsx("span",{className:"font-semibold",children:(d=a.amount_total,u=a.currency,new Intl.NumberFormat("en-US",{style:"currency",currency:(null==u?void 0:u.toUpperCase())||"USD"}).format(d/100))})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Payment Status"}),r.jsx(Ka,{variant:"secondary",className:"bg-green-100 text-green-800",children:a.payment_status})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Session ID"}),r.jsx("span",{className:"font-mono text-sm",children:a.id})]}),a.subscription&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"font-semibold mb-2 flex items-center",children:[r.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Subscription Details"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Plan"}),r.jsx("span",{children:(null==(e=a.metadata)?void 0:e.plan)||"Professional"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Billing"}),r.jsx("span",{children:(null==(t=a.metadata)?void 0:t.billingCycle)||"Monthly"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subscription ID"}),r.jsx("span",{className:"font-mono",children:a.subscription})]})]})]})]})]}),r.jsxs(Cn,{className:"mb-8",children:[r.jsxs(Pn,{children:[r.jsx(Tn,{children:"What's Next?"}),r.jsx(En,{children:"Get started with your Rent Control subscription"})]}),r.jsxs(An,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-semibold",children:"1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Check your email"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"We've sent you a confirmation email with your receipt and account details."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-semibold",children:"2"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Set up your account"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete your profile and add your first property to get started."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-semibold",children:"3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:"Explore features"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Take advantage of all the powerful tools in your subscription plan."})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(on,{asChild:!0,className:"flex-1",children:r.jsxs(O,{to:"/dashboard",children:["Go to Dashboard",r.jsx(Fr,{className:"w-4 h-4 ml-2"})]})}),r.jsxs(on,{variant:"outline",className:"flex-1",children:[r.jsx(sa,{className:"w-4 h-4 mr-2"}),"Download Receipt"]})]}),r.jsxs("div",{className:"text-center mt-8 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Need Help?"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Our support team is here to help you get started"}),r.jsx(on,{variant:"outline",size:"sm",asChild:!0,children:r.jsx(O,{to:"/contact",children:"Contact Support"})})]})]})})});var d,u}function vi(){const{user:e}=Lr(),t=I(),s=q();return A.useEffect(()=>{!e||"admin"!==e.role||e.plan&&"free"!==e.plan||"/choose-plan"===t.pathname||s("/choose-plan")},[e,t.pathname,s]),null}function ji(){return r.jsx(Ya,{children:r.jsx(Da,{children:r.jsx(Ir,{children:r.jsx($,{children:r.jsx("div",{className:"min-h-screen bg-background text-foreground",children:r.jsxs(D,{children:[r.jsx(U,{path:"/auth/callback",element:r.jsx(Zn,{})}),r.jsx(U,{path:"/login",element:r.jsx(qr,{children:r.jsx(mn,{})})}),r.jsx(U,{path:"/signup",element:r.jsx(qr,{children:r.jsx(jn,{})})}),r.jsx(U,{path:"/register",element:r.jsx(qr,{children:r.jsx(Nn,{})})}),r.jsx(U,{path:"/register/landlord",element:r.jsx(qr,{children:r.jsx(kn,{})})}),r.jsx(U,{path:"/register/tenant",element:r.jsx(qr,{children:r.jsx(_n,{})})}),r.jsx(U,{path:"/tenant/pending",element:r.jsx(Or,{children:r.jsx(Sn,{})})}),r.jsx(U,{path:"/reset-password",element:r.jsx(qr,{children:r.jsx(wn,{})})}),r.jsx(U,{path:"/choose-plan",element:r.jsx(Or,{children:r.jsx(xi,{})})}),r.jsx(U,{path:"/checkout",element:r.jsx(Or,{children:r.jsx(gi,{})})}),r.jsx(U,{path:"/billing",element:r.jsx(Or,{children:r.jsx(yi,{})})}),r.jsx(U,{path:"/billing/success",element:r.jsx(Or,{children:r.jsx(fi,{})})}),r.jsx(U,{path:"/admin/dashboard",element:r.jsx(Or,{requiredRole:"admin",children:r.jsx(In,{})})}),r.jsx(U,{path:"/admin/demo",element:r.jsx(Rn,{})}),r.jsx(U,{path:"/resident/dashboard",element:r.jsx(Or,{requiredRole:"tenant",children:r.jsx(Qn,{})})}),r.jsx(U,{path:"/success",element:r.jsx(Or,{children:r.jsx(bi,{})})}),r.jsx(U,{path:"/*",element:r.jsxs(r.Fragment,{children:[r.jsx(vi,{}),r.jsx(Wa,{}),r.jsx("main",{className:"flex-1",children:r.jsxs(D,{children:[r.jsx(U,{path:"/",element:r.jsx(en,{})}),r.jsx(U,{path:"/about",element:r.jsx(Xn,{})}),r.jsx(U,{path:"/contact",element:r.jsx(ei,{})}),r.jsx(U,{path:"/faq",element:r.jsx(ti,{})}),r.jsx(U,{path:"/blog",element:r.jsx(si,{})}),r.jsx(U,{path:"/help",element:r.jsx(si,{})})]})}),r.jsx(Ga,{}),r.jsx(Ja,{})]})})]})})})})})})}e(document.getElementById("root")).render(r.jsx(A.StrictMode,{children:r.jsx(ji,{})}));
